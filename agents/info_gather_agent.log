2025-09-20 11:43:16,316 - INFO - werkzeug - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-09-20 11:43:16,316 - INFO - werkzeug - [33mPress CTRL+C to quit[0m
2025-09-20 11:43:16,322 - INFO - werkzeug -  * Restarting with watchdog (windowsapi)
2025-09-20 11:43:19,998 - WARNING - werkzeug -  * Debugger is active!
2025-09-20 11:43:20,000 - INFO - werkzeug -  * Debugger PIN: 102-541-216
2025-09-20 11:43:29,868 - INFO - __main__ - Received request with query: What is the stock price of aapl?, session_id: session_123, user_id: user_456
2025-09-20 11:43:29,869 - INFO - root - -- Before agent call hook executed.
2025-09-20 11:43:29,870 - INFO - root - CallbackContext: ('e-d43392a7-ab12-4b63-9b8d-12e620d30d29', {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 0}, Content(
  parts=[
    Part(
      text='What is the stock price of aapl?'
    ),
  ],
  role='user'
))
2025-09-20 11:43:29,896 - INFO - root - ------ Before model call hook executed.
2025-09-20 11:43:29,897 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 1}, 
LLM_Request: model='gemini-2.5-flash' contents=[Content(
  parts=[
    Part(
      text='What is the stock price of aapl?'
    ),
  ],
  role='user'
)] config=GenerateContentConfig(
  system_instruction=""" you are a stock analyst who can use other agents to suppliment the analysis by gathering information.
History: 

You are an agent. Your internal name is "root_agent".

 The description about you is "Root agent to coordinate stock analysis"""",
  tools=[
    Tool(
      function_declarations=[
        FunctionDeclaration(
          description='analyse provided ticker symbol',
          name='info_gather_agent',
          parameters=Schema(
            properties={
              <... Max depth ...>: <... Max depth ...>
            },
            required=[
              <... Max depth ...>,
            ],
            type=<Type.OBJECT: 'OBJECT'>
          )
        ),
      ]
    ),
  ]
) live_connect_config=LiveConnectConfig() tools_dict={'info_gather_agent': <google.adk.tools.agent_tool.AgentTool object at 0x000001C2877557F0>}
2025-09-20 11:43:30,475 - INFO - google_adk.google.adk.models.google_llm - Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
2025-09-20 11:43:30,475 - INFO - google_genai.models - AFC is enabled with max remote calls: 10.
2025-09-20 11:43:31,538 - INFO - google_adk.google.adk.models.google_llm - Response received from the model.
2025-09-20 11:43:31,538 - WARNING - google_genai.types - Warning: there are non-text parts in the response: ['thought_signature', 'function_call'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
2025-09-20 11:43:31,538 - INFO - root - ------ After model call hook executed.
2025-09-20 11:43:31,539 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 1}, 
LLM_Response: content=Content(
  parts=[
    Part(
      function_call=FunctionCall(
        args={
          'request': 'stock price of aapl'
        },
        name='info_gather_agent'
      ),
      thought_signature=b'\n\xe4\x04\x01\xd1\xed\x8ao\x1f\x8d=z\xda\x98\xb2\x9d\x03p\xee\xc8\x96\x9f\x1d\xd3\x81\xfb\\\xfee"g\xb9\xf28\xc5\x9d\x1e\x9c\xe0<\xb0\xff\xdd\x12\xc7^M\x95h\xe1(\x96t\x0bm\x02$MJ\xdb\xbf\x15D\x16\xa1q\xe1\x9c\xeeqQsG\xd0\xf8e\xba\xf4av\x90\xcb\x19\xa7\xcc\xa5=\xca\xa4@\xf86\x85T\xb0\xe8\x91...'
    ),
  ],
  role='model'
) grounding_metadata=None partial=None turn_complete=None finish_reason=<FinishReason.STOP: 'STOP'> error_code=None error_message=None interrupted=None custom_metadata=None usage_metadata=GenerateContentResponseUsageMetadata(
  candidates_token_count=21,
  prompt_token_count=101,
  prompt_tokens_details=[
    ModalityTokenCount(
      modality=<MediaModality.TEXT: 'TEXT'>,
      token_count=101
    ),
  ],
  thoughts_token_count=132,
  total_token_count=254
) live_session_resumption_update=None input_transcription=None output_transcription=None
2025-09-20 11:43:31,539 - INFO - root - ---- Before tool call hook executed.
2025-09-20 11:43:31,539 - INFO - root - Tool: info_gather_agent, 
Args: {'request': 'stock price of aapl'}, 
ToolContext: <google.adk.sessions.state.State object at 0x000001C287FDF2F0>
2025-09-20 11:43:31,543 - INFO - root - -- Before agent call hook executed.
2025-09-20 11:43:31,543 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 2}
2025-09-20 11:43:31,543 - INFO - root - -- Before model call hook executed.
2025-09-20 11:43:31,544 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 2}, 
LLM_Request: model='gemini-2.5-flash' contents=[Content(
  parts=[
    Part(
      text='stock price of aapl'
    ),
  ],
  role='user'
)] config=GenerateContentConfig(
  system_instruction="""you can gather information about stocks using yfinance api, 
you can reflect upon the result and provide comprehensive details using data. Previous agent output: 

You are an agent. Your internal name is "info_gather_agent".

 The description about you is "analyse provided ticker symbol"""",
  tools=[
    Tool(
      function_declarations=[
        FunctionDeclaration(
          description="""
Extract stock information for a given ticker symbol.
ticker - string ticker symbol for the stock
""",
          name='extract_stock_info',
          parameters=Schema(
            properties={
              <... Max depth ...>: <... Max depth ...>
            },
            required=[
              <... Max depth ...>,
            ],
            type=<Type.OBJECT: 'OBJECT'>
          )
        ),
      ]
    ),
  ]
) live_connect_config=LiveConnectConfig() tools_dict={'extract_stock_info': <google.adk.tools.function_tool.FunctionTool object at 0x000001C2881CA3C0>}
2025-09-20 11:43:32,103 - INFO - google_adk.google.adk.models.google_llm - Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
2025-09-20 11:43:32,103 - INFO - google_genai.models - AFC is enabled with max remote calls: 10.
2025-09-20 11:43:32,843 - INFO - google_adk.google.adk.models.google_llm - Response received from the model.
2025-09-20 11:43:32,843 - WARNING - google_genai.types - Warning: there are non-text parts in the response: ['thought_signature', 'function_call'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
2025-09-20 11:43:32,843 - INFO - root - -- After model call hook executed.
2025-09-20 11:43:32,843 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 2}, 
LLM_Response: content=Content(
  parts=[
    Part(
      function_call=FunctionCall(
        args={
          'ticker': 'aapl'
        },
        name='extract_stock_info'
      ),
      thought_signature=b"\n\xff\x01\x01\xd1\xed\x8ao3u\xfdSA\xfd\xf6\x0b\xdd4\x80#\x97\x1a1\xc2\x1b\x1dS\x9f\xbb\xadPq2\x9c\x85\r\xea\xf778\x9c\xe1\xd8\x1c\x82[\x9dO\xc4\xc1l\xb3\x1a\xc6X\xca\xfc\x80\nl\xf6RE\x8aJ\xc9Y\x17\xe8\x08\x0136\x13\t\xd5\xca\xa6\xcb'\xa6\xed*I!\x8d\xc1\x91^\xd7\xe3\xa3\x11\xc0\x7f37...'
    ),
  ],
  role='model'
) grounding_metadata=None partial=None turn_complete=None finish_reason=<FinishReason.STOP: 'STOP'> error_code=None error_message=None interrupted=None custom_metadata=None usage_metadata=GenerateContentResponseUsageMetadata(
  candidates_token_count=18,
  prompt_token_count=122,
  prompt_tokens_details=[
    ModalityTokenCount(
      modality=<MediaModality.TEXT: 'TEXT'>,
      token_count=122
    ),
  ],
  thoughts_token_count=57,
  total_token_count=197
) live_session_resumption_update=None input_transcription=None output_transcription=None
2025-09-20 11:43:32,843 - INFO - root - -- Before tool call hook executed.
2025-09-20 11:43:32,843 - INFO - root - Tool: extract_stock_info, 
Args: {'ticker': 'aapl'}, 
ToolContext: <google.adk.sessions.state.State object at 0x000001C288038B90>
2025-09-20 11:43:33,430 - INFO - root - -- After tool call hook executed.
2025-09-20 11:43:33,431 - INFO - root - Tool: extract_stock_info, 
Args: {'ticker': 'aapl'}, 
ToolContext: <google.adk.sessions.state.State object at 0x000001C288038B90>, 
Output: {'address1': 'One Apple Park Way', 'city': 'Cupertino', 'state': 'CA', 'zip': '95014', 'country': 'United States', 'phone': '(408) 996-1010', 'website': 'https://www.apple.com', 'industry': 'Consumer Electronics', 'industryKey': 'consumer-electronics', 'industryDisp': 'Consumer Electronics', 'sector': 'Technology', 'sectorKey': 'technology', 'sectorDisp': 'Technology', 'longBusinessSummary': 'Apple Inc. designs, manufactures, and markets smartphones, personal computers, tablets, wearables, and accessories worldwide. The company offers iPhone, a line of smartphones; Mac, a line of personal computers; iPad, a line of multi-purpose tablets; and wearables, home, and accessories comprising AirPods, Apple TV, Apple Watch, Beats products, and HomePod. It also provides AppleCare support and cloud services; and operates various platforms, including the App Store that allow customers to discover and download applications and digital content, such as books, music, video, games, and podcasts, as well as advertising services include third-party licensing arrangements and its own advertising platforms. In addition, the company offers various subscription-based services, such as Apple Arcade, a game subscription service; Apple Fitness+, a personalized fitness service; Apple Music, which offers users a curated listening experience with on-demand radio stations; Apple News+, a subscription news and magazine service; Apple TV+, which offers exclusive original content; Apple Card, a co-branded credit card; and Apple Pay, a cashless payment service, as well as licenses its intellectual property. The company serves consumers, and small and mid-sized businesses; and the education, enterprise, and government markets. It distributes third-party applications for its products through the App Store. The company also sells its products through its retail and online stores, and direct sales force; and third-party cellular network carriers, wholesalers, retailers, and resellers. Apple Inc. was founded in 1976 and is headquartered in Cupertino, California.', 'fullTimeEmployees': 150000, 'companyOfficers': [{'maxAge': 1, 'name': 'Mr. Timothy D. Cook', 'age': 63, 'title': 'CEO & Director', 'yearBorn': 1961, 'fiscalYear': 2024, 'totalPay': 16520856, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Ms. Katherine L. Adams', 'age': 60, 'title': 'Senior VP, General Counsel & Secretary', 'yearBorn': 1964, 'fiscalYear': 2024, 'totalPay': 5022182, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': "Ms. Deirdre  O'Brien", 'age': 57, 'title': 'Chief People Officer & Senior VP of Retail', 'yearBorn': 1967, 'fiscalYear': 2024, 'totalPay': 5022182, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Mr. Jeffrey E. Williams', 'age': 60, 'title': 'Senior Vice President of Design, Watch, & Health', 'yearBorn': 1964, 'fiscalYear': 2024, 'totalPay': 5020737, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Mr. Kevan  Parekh', 'age': 52, 'title': 'Senior VP & CFO', 'yearBorn': 1972, 'fiscalYear': 2024, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Mr. Sabih  Khan', 'title': 'Chief Operating Officer', 'fiscalYear': 2024, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Mr. Chris  Kondo', 'title': 'Senior Director of Corporate Accounting', 'fiscalYear': 2024, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Suhasini  Chandramouli', 'title': 'Director of Investor Relations', 'fiscalYear': 2024, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Ms. Kristin Huguet Quayle', 'title': 'Vice President of Worldwide Communications', 'fiscalYear': 2024, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Mr. Greg  Joswiak', 'title': 'Senior Vice President of Worldwide Marketing', 'fiscalYear': 2024, 'exercisedValue': 0, 'unexercisedValue': 0}], 'auditRisk': 7, 'boardRisk': 1, 'compensationRisk': 3, 'shareHolderRightsRisk': 1, 'overallRisk': 1, 'governanceEpochDate': 1756684800, 'compensationAsOfEpochDate': 1735603200, 'irWebsite': 'http://investor.apple.com/', 'executiveTeam': [], 'maxAge': 86400, 'priceHint': 2, 'previousClose': 237.88, 'open': 241.175, 'dayLow': 240.2106, 'dayHigh': 246.27, 'regularMarketPreviousClose': 237.88, 'regularMarketOpen': 241.175, 'regularMarketDayLow': 240.2106, 'regularMarketDayHigh': 246.3, 'dividendRate': 1.04, 'dividendYield': 0.42, 'exDividendDate': 1754870400, 'payoutRatio': 0.1533, 'fiveYearAvgDividendYield': 0.54, 'beta': 1.109, 'trailingPE': 37.31003, 'forwardPE': 29.542719, 'volume': 162456387, 'regularMarketVolume': 162456387, 'averageVolume': 56212347, 'averageVolume10days': 66513550, 'averageDailyVolume10Day': 66513550, 'bid': 240.0, 'ask': 258.21, 'bidSize': 1, 'askSize': 1, 'marketCap': 3643315585024, 'fiftyTwoWeekLow': 169.21, 'fiftyTwoWeekHigh': 260.1, 'priceToSalesTrailing12Months': 8.916038, 'fiftyDayAverage': 223.929, 'twoHundredDayAverage': 221.6535, 'trailingAnnualDividendRate': 1.01, 'trailingAnnualDividendYield': 0.004245838, 'currency': 'USD', 'tradeable': False, 'enterpriseValue': 3689641672704, 'profitMargins': 0.24295999, 'floatShares': 14814419318, 'sharesOutstanding': 14840390000, 'sharesShort': 113582365, 'sharesShortPriorMonth': 104634941, 'sharesShortPreviousMonthDate': 1753920000, 'dateShortInterest': 1756425600, 'sharesPercentSharesOut': 0.0077, 'heldPercentInsiders': 0.0197, 'heldPercentInstitutions': 0.63643, 'shortRatio': 1.95, 'shortPercentOfFloat': 0.0077, 'impliedSharesOutstanding': 15318899712, 'bookValue': 4.431, 'priceToBook': 55.405098, 'lastFiscalYearEnd': 1727481600, 'nextFiscalYearEnd': 1759017600, 'mostRecentQuarter': 1751068800, 'earningsQuarterlyGrowth': 0.093, 'netIncomeToCommon': 99280003072, 'trailingEps': 6.58, 'forwardEps': 8.31, 'lastSplitFactor': '4:1', 'lastSplitDate': 1598832000, 'enterpriseToRevenue': 9.029, 'enterpriseToEbitda': 26.039, '52WeekChange': 0.08402884, 'SandP52WeekChange': 0.1653893, 'lastDividendValue': 0.26, 'lastDividendDate': 1754870400, 'quoteType': 'EQUITY', 'currentPrice': 245.5, 'targetHighPrice': 300.0, 'targetLowPrice': 175.0, 'targetMeanPrice': 241.31557, 'targetMedianPrice': 243.0, 'recommendationMean': 2.02128, 'recommendationKey': 'buy', 'numberOfAnalystOpinions': 40, 'totalCash': 55372001280, 'totalCashPerShare': 3.731, 'ebitda': 141696008192, 'totalDebt': 101698002944, 'quickRatio': 0.724, 'currentRatio': 0.868, 'totalRevenue': 408624988160, 'debtToEquity': 154.486, 'revenuePerShare': 27.173, 'returnOnAssets': 0.24545999, 'returnOnEquity': 1.49814, 'grossProfits': 190739005440, 'freeCashflow': 94873747456, 'operatingCashflow': 108564996096, 'earningsGrowth': 0.121, 'revenueGrowth': 0.096, 'grossMargins': 0.46678, 'ebitdaMargins': 0.34675997, 'operatingMargins': 0.29990998, 'financialCurrency': 'USD', 'symbol': 'AAPL', 'language': 'en-US', 'region': 'US', 'typeDisp': 'Equity', 'quoteSourceName': 'Delayed Quote', 'triggerable': True, 'customPriceAlertConfidence': 'HIGH', 'marketState': 'CLOSED', 'shortName': 'Apple Inc.', 'longName': 'Apple Inc.', 'hasPrePostMarketData': True, 'firstTradeDateMilliseconds': 345479400000, 'postMarketChangePercent': 0.07739407, 'postMarketPrice': 245.69, 'postMarketChange': 0.19000244, 'regularMarketChange': 7.62, 'regularMarketDayRange': '240.2106 - 246.3', 'fullExchangeName': 'NasdaqGS', 'averageDailyVolume3Month': 56212347, 'exchange': 'NMS', 'messageBoardId': 'finmb_24937', 'exchangeTimezoneName': 'America/New_York', 'exchangeTimezoneShortName': 'EDT', 'gmtOffSetMilliseconds': -14400000, 'market': 'us_market', 'esgPopulated': False, 'corporateActions': [], 'postMarketTime': 1758326399, 'regularMarketTime': 1758312002, 'regularMarketChangePercent': 3.20329, 'regularMarketPrice': 245.5, 'fiftyTwoWeekLowChange': 76.28999, 'fiftyTwoWeekLowChangePercent': 0.4508598, 'fiftyTwoWeekRange': '169.21 - 260.1', 'fiftyTwoWeekHighChange': -14.600006, 'fiftyTwoWeekHighChangePercent': -0.05613228, 'fiftyTwoWeekChangePercent': 8.402884, 'dividendDate': 1755129600, 'earningsTimestamp': 1753992000, 'earningsTimestampStart': 1761854400, 'earningsTimestampEnd': 1761854400, 'earningsCallTimestampStart': 1753995600, 'earningsCallTimestampEnd': 1753995600, 'isEarningsDateEstimate': True, 'epsTrailingTwelveMonths': 6.58, 'epsForward': 8.31, 'epsCurrentYear': 7.38448, 'priceEpsCurrentYear': 33.2454, 'fiftyDayAverageChange': 21.571, 'fiftyDayAverageChangePercent': 0.09632964, 'twoHundredDayAverageChange': 23.846497, 'twoHundredDayAverageChangePercent': 0.107584566, 'sourceInterval': 15, 'exchangeDataDelayedBy': 0, 'averageAnalystRating': '2.0 - Buy', 'cryptoTradeable': False, 'displayName': 'Apple', 'trailingPegRatio': 2.3591}
2025-09-20 11:43:33,433 - INFO - root - -- Before model call hook executed.
2025-09-20 11:43:33,433 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 2}, 
LLM_Request: model='gemini-2.5-flash' contents=[Content(
  parts=[
    Part(
      text='stock price of aapl'
    ),
  ],
  role='user'
), Content(
  parts=[
    Part(
      function_call=FunctionCall(
        args={
          'ticker': 'aapl'
        },
        name='extract_stock_info'
      ),
      thought_signature=b"\n\xff\x01\x01\xd1\xed\x8ao3u\xfdSA\xfd\xf6\x0b\xdd4\x80#\x97\x1a1\xc2\x1b\x1dS\x9f\xbb\xadPq2\x9c\x85\r\xea\xf778\x9c\xe1\xd8\x1c\x82[\x9dO\xc4\xc1l\xb3\x1a\xc6X\xca\xfc\x80\nl\xf6RE\x8aJ\xc9Y\x17\xe8\x08\x0136\x13\t\xd5\xca\xa6\xcb'\xa6\xed*I!\x8d\xc1\x91^\xd7\xe3\xa3\x11\xc0\x7f37...'
    ),
  ],
  role='model'
), Content(
  parts=[
    Part(
      function_response=FunctionResponse(
        name='extract_stock_info',
        response=<dict len=180>
      )
    ),
  ],
  role='user'
)] config=GenerateContentConfig(
  system_instruction="""you can gather information about stocks using yfinance api, 
you can reflect upon the result and provide comprehensive details using data. Previous agent output: 

You are an agent. Your internal name is "info_gather_agent".

 The description about you is "analyse provided ticker symbol"""",
  tools=[
    Tool(
      function_declarations=[
        FunctionDeclaration(
          description="""
Extract stock information for a given ticker symbol.
ticker - string ticker symbol for the stock
""",
          name='extract_stock_info',
          parameters=Schema(
            properties={
              <... Max depth ...>: <... Max depth ...>
            },
            required=[
              <... Max depth ...>,
            ],
            type=<Type.OBJECT: 'OBJECT'>
          )
        ),
      ]
    ),
  ]
) live_connect_config=LiveConnectConfig() tools_dict={'extract_stock_info': <google.adk.tools.function_tool.FunctionTool object at 0x000001C287FA7C50>}
2025-09-20 11:43:33,991 - INFO - google_adk.google.adk.models.google_llm - Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
2025-09-20 11:43:33,992 - INFO - google_genai.models - AFC is enabled with max remote calls: 10.
2025-09-20 11:43:34,905 - INFO - google_adk.google.adk.models.google_llm - Response received from the model.
2025-09-20 11:43:34,905 - INFO - root - -- After model call hook executed.
2025-09-20 11:43:34,905 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 2}, 
LLM_Response: content=Content(
  parts=[
    Part(
      text="The current stock price of Apple (AAPL) is $245.50. The day's high was $246.30 and the day's low was $240.21."
    ),
  ],
  role='model'
) grounding_metadata=None partial=None turn_complete=None finish_reason=<FinishReason.STOP: 'STOP'> error_code=None error_message=None interrupted=None custom_metadata=None usage_metadata=GenerateContentResponseUsageMetadata(
  candidates_token_count=46,
  prompt_token_count=3503,
  prompt_tokens_details=[
    ModalityTokenCount(
      modality=<MediaModality.TEXT: 'TEXT'>,
      token_count=3503
    ),
  ],
  total_token_count=3549
) live_session_resumption_update=None input_transcription=None output_transcription=None
2025-09-20 11:43:34,906 - INFO - root - -- After agent call hook executed.
2025-09-20 11:43:34,906 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 2, 'result': "The current stock price of Apple (AAPL) is $245.50. The day's high was $246.30 and the day's low was $240.21."}
2025-09-20 11:43:34,906 - INFO - root - ---- After tool call hook executed.
2025-09-20 11:43:34,906 - INFO - root - Tool: info_gather_agent, 
Args: {'request': 'stock price of aapl'}, 
ToolContext: <google.adk.sessions.state.State object at 0x000001C287FDF2F0>, 
Output: The current stock price of Apple (AAPL) is $245.50. The day's high was $246.30 and the day's low was $240.21.
2025-09-20 11:43:34,912 - INFO - root - ------ Before model call hook executed.
2025-09-20 11:43:34,913 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 3, 'result': "The current stock price of Apple (AAPL) is $245.50. The day's high was $246.30 and the day's low was $240.21."}, 
LLM_Request: model='gemini-2.5-flash' contents=[Content(
  parts=[
    Part(
      text='What is the stock price of aapl?'
    ),
  ],
  role='user'
), Content(
  parts=[
    Part(
      function_call=FunctionCall(
        args={
          'request': 'stock price of aapl'
        },
        name='info_gather_agent'
      ),
      thought_signature=b'\n\xe4\x04\x01\xd1\xed\x8ao\x1f\x8d=z\xda\x98\xb2\x9d\x03p\xee\xc8\x96\x9f\x1d\xd3\x81\xfb\\\xfee"g\xb9\xf28\xc5\x9d\x1e\x9c\xe0<\xb0\xff\xdd\x12\xc7^M\x95h\xe1(\x96t\x0bm\x02$MJ\xdb\xbf\x15D\x16\xa1q\xe1\x9c\xeeqQsG\xd0\xf8e\xba\xf4av\x90\xcb\x19\xa7\xcc\xa5=\xca\xa4@\xf86\x85T\xb0\xe8\x91...'
    ),
  ],
  role='model'
), Content(
  parts=[
    Part(
      function_response=FunctionResponse(
        name='info_gather_agent',
        response={
          'result': "The current stock price of Apple (AAPL) is $245.50. The day's high was $246.30 and the day's low was $240.21."
        }
      )
    ),
  ],
  role='user'
)] config=GenerateContentConfig(
  system_instruction=""" you are a stock analyst who can use other agents to suppliment the analysis by gathering information.
History: 

You are an agent. Your internal name is "root_agent".

 The description about you is "Root agent to coordinate stock analysis"""",
  tools=[
    Tool(
      function_declarations=[
        FunctionDeclaration(
          description='analyse provided ticker symbol',
          name='info_gather_agent',
          parameters=Schema(
            properties={
              <... Max depth ...>: <... Max depth ...>
            },
            required=[
              <... Max depth ...>,
            ],
            type=<Type.OBJECT: 'OBJECT'>
          )
        ),
      ]
    ),
  ]
) live_connect_config=LiveConnectConfig() tools_dict={'info_gather_agent': <google.adk.tools.agent_tool.AgentTool object at 0x000001C2877557F0>}
2025-09-20 11:43:35,470 - INFO - google_adk.google.adk.models.google_llm - Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
2025-09-20 11:43:35,470 - INFO - google_genai.models - AFC is enabled with max remote calls: 10.
2025-09-20 11:43:35,952 - INFO - google_adk.google.adk.models.google_llm - Response received from the model.
2025-09-20 11:43:35,952 - INFO - root - ------ After model call hook executed.
2025-09-20 11:43:35,952 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 3, 'result': "The current stock price of Apple (AAPL) is $245.50. The day's high was $246.30 and the day's low was $240.21."}, 
LLM_Response: content=Content(
  parts=[
    Part(
      text="The current stock price of Apple (AAPL) is $245.50. The day's high was $246.30 and the day's low was $240.21."
    ),
  ],
  role='model'
) grounding_metadata=None partial=None turn_complete=None finish_reason=<FinishReason.STOP: 'STOP'> error_code=None error_message=None interrupted=None custom_metadata=None usage_metadata=GenerateContentResponseUsageMetadata(
  candidates_token_count=46,
  prompt_token_count=184,
  prompt_tokens_details=[
    ModalityTokenCount(
      modality=<MediaModality.TEXT: 'TEXT'>,
      token_count=184
    ),
  ],
  total_token_count=230
) live_session_resumption_update=None input_transcription=None output_transcription=None
2025-09-20 11:43:35,954 - INFO - root - -- After agent call hook executed.
2025-09-20 11:43:35,954 - INFO - root - CallbackContext: ('e-d43392a7-ab12-4b63-9b8d-12e620d30d29', {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 3, 'result': "The current stock price of Apple (AAPL) is $245.50. The day's high was $246.30 and the day's low was $240.21."}, Content(
  parts=[
    Part(
      text='What is the stock price of aapl?'
    ),
  ],
  role='user'
))
2025-09-20 11:43:35,960 - INFO - werkzeug - 127.0.0.1 - - [20/Sep/2025 11:43:35] "POST /agent_endpoint HTTP/1.1" 200 -
2025-09-20 11:43:44,810 - INFO - __main__ - Received request with query: What is the delta between opening and closing price?, session_id: session_123, user_id: user_456
2025-09-20 11:43:44,810 - INFO - root - -- Before agent call hook executed.
2025-09-20 11:43:44,811 - INFO - root - CallbackContext: ('e-675f9933-b4d6-4abc-a233-2b741b9f50b3', {'history': "\nUser: What is the stock price of aapl?\nAgent: The current stock price of Apple (AAPL) is $245.50. The day's high was $246.30 and the day's low was $240.21.", 'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 4}, Content(
  parts=[
    Part(
      text='What is the delta between opening and closing price?'
    ),
  ],
  role='user'
))
2025-09-20 11:43:44,816 - INFO - root - ------ Before model call hook executed.
2025-09-20 11:43:44,816 - INFO - root - CallbackContext: {'history': "\nUser: What is the stock price of aapl?\nAgent: The current stock price of Apple (AAPL) is $245.50. The day's high was $246.30 and the day's low was $240.21.", 'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 5}, 
LLM_Request: model='gemini-2.5-flash' contents=[Content(
  parts=[
    Part(
      text='What is the delta between opening and closing price?'
    ),
  ],
  role='user'
)] config=GenerateContentConfig(
  system_instruction=""" you are a stock analyst who can use other agents to suppliment the analysis by gathering information.
History: 
User: What is the stock price of aapl?
Agent: The current stock price of Apple (AAPL) is $245.50. The day's high was $246.30 and the day's low was $240.21.

You are an agent. Your internal name is "root_agent".

 The description about you is "Root agent to coordinate stock analysis"""",
  tools=[
    Tool(
      function_declarations=[
        FunctionDeclaration(
          description='analyse provided ticker symbol',
          name='info_gather_agent',
          parameters=Schema(
            properties={
              <... Max depth ...>: <... Max depth ...>
            },
            required=[
              <... Max depth ...>,
            ],
            type=<Type.OBJECT: 'OBJECT'>
          )
        ),
      ]
    ),
  ]
) live_connect_config=LiveConnectConfig() tools_dict={'info_gather_agent': <google.adk.tools.agent_tool.AgentTool object at 0x000001C2877557F0>}
2025-09-20 11:43:45,372 - INFO - google_adk.google.adk.models.google_llm - Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
2025-09-20 11:43:45,372 - INFO - google_genai.models - AFC is enabled with max remote calls: 10.
2025-09-20 11:43:46,486 - INFO - google_adk.google.adk.models.google_llm - Response received from the model.
2025-09-20 11:43:46,486 - WARNING - google_genai.types - Warning: there are non-text parts in the response: ['thought_signature', 'function_call'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
2025-09-20 11:43:46,486 - INFO - root - ------ After model call hook executed.
2025-09-20 11:43:46,486 - INFO - root - CallbackContext: {'history': "\nUser: What is the stock price of aapl?\nAgent: The current stock price of Apple (AAPL) is $245.50. The day's high was $246.30 and the day's low was $240.21.", 'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 5}, 
LLM_Response: content=Content(
  parts=[
    Part(
      function_call=FunctionCall(
        args={
          'request': 'What was the opening price of AAPL?'
        },
        name='info_gather_agent'
      ),
      thought_signature=b"\n\xd6\x02\x01\xd1\xed\x8aoc\xee\\c\x8en\xea\x7f\xd7?\x91\x0b0\x9c\xa9\x14E\xd8\x1e44\x9d\xc9\xd2\xd3\x94\x17Wt\xf5\xd2b\xdc_X\x0b\x0fT\x05fu\xdd0K\x9d\x01(\xcf5\x9c\xd7'\xad#\x90\xbe`\x01\x90\x96w2\xf1C\xd4g\x88s\xc2\x14\xf9 |\x12\xec\xc8Us\x99\x1a\x1b\xa4C|\xf1-\x95k6...'
    ),
  ],
  role='model'
) grounding_metadata=None partial=None turn_complete=None finish_reason=<FinishReason.STOP: 'STOP'> error_code=None error_message=None interrupted=None custom_metadata=None usage_metadata=GenerateContentResponseUsageMetadata(
  candidates_token_count=25,
  prompt_token_count=163,
  prompt_tokens_details=[
    ModalityTokenCount(
      modality=<MediaModality.TEXT: 'TEXT'>,
      token_count=163
    ),
  ],
  thoughts_token_count=79,
  total_token_count=267
) live_session_resumption_update=None input_transcription=None output_transcription=None
2025-09-20 11:43:46,487 - INFO - root - ---- Before tool call hook executed.
2025-09-20 11:43:46,487 - INFO - root - Tool: info_gather_agent, 
Args: {'request': 'What was the opening price of AAPL?'}, 
ToolContext: <google.adk.sessions.state.State object at 0x000001C2881E2C90>
2025-09-20 11:43:46,503 - INFO - root - -- Before agent call hook executed.
2025-09-20 11:43:46,503 - INFO - root - CallbackContext: {'history': "\nUser: What is the stock price of aapl?\nAgent: The current stock price of Apple (AAPL) is $245.50. The day's high was $246.30 and the day's low was $240.21.", 'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 6}
2025-09-20 11:43:46,503 - INFO - root - -- Before model call hook executed.
2025-09-20 11:43:46,504 - INFO - root - CallbackContext: {'history': "\nUser: What is the stock price of aapl?\nAgent: The current stock price of Apple (AAPL) is $245.50. The day's high was $246.30 and the day's low was $240.21.", 'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 6}, 
LLM_Request: model='gemini-2.5-flash' contents=[Content(
  parts=[
    Part(
      text='What was the opening price of AAPL?'
    ),
  ],
  role='user'
)] config=GenerateContentConfig(
  system_instruction="""you can gather information about stocks using yfinance api, 
you can reflect upon the result and provide comprehensive details using data. Previous agent output: 
User: What is the stock price of aapl?
Agent: The current stock price of Apple (AAPL) is $245.50. The day's high was $246.30 and the day's low was $240.21.

You are an agent. Your internal name is "info_gather_agent".

 The description about you is "analyse provided ticker symbol"""",
  tools=[
    Tool(
      function_declarations=[
        FunctionDeclaration(
          description="""
Extract stock information for a given ticker symbol.
ticker - string ticker symbol for the stock
""",
          name='extract_stock_info',
          parameters=Schema(
            properties={
              <... Max depth ...>: <... Max depth ...>
            },
            required=[
              <... Max depth ...>,
            ],
            type=<Type.OBJECT: 'OBJECT'>
          )
        ),
      ]
    ),
  ]
) live_connect_config=LiveConnectConfig() tools_dict={'extract_stock_info': <google.adk.tools.function_tool.FunctionTool object at 0x000001C2881F2E90>}
2025-09-20 11:43:47,066 - INFO - google_adk.google.adk.models.google_llm - Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
2025-09-20 11:43:47,066 - INFO - google_genai.models - AFC is enabled with max remote calls: 10.
2025-09-20 11:43:47,829 - INFO - google_adk.google.adk.models.google_llm - Response received from the model.
2025-09-20 11:43:47,830 - WARNING - google_genai.types - Warning: there are non-text parts in the response: ['thought_signature', 'function_call'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
2025-09-20 11:43:47,830 - INFO - root - -- After model call hook executed.
2025-09-20 11:43:47,830 - INFO - root - CallbackContext: {'history': "\nUser: What is the stock price of aapl?\nAgent: The current stock price of Apple (AAPL) is $245.50. The day's high was $246.30 and the day's low was $240.21.", 'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 6}, 
LLM_Response: content=Content(
  parts=[
    Part(
      function_call=FunctionCall(
        args={
          'ticker': 'AAPL'
        },
        name='extract_stock_info'
      ),
      thought_signature=b'\n\xf6\x02\x01\xd1\xed\x8ao\xc3\x8e\x17k\xddp\xba\x84\x8f\x8eTf\x1a\xe7R\xe1\xfc\xb2\xe5.\x8dc\xb7\xa2\x9f\xc4K\x94\xc7V#\xe9\xf5H\x7f\x9c*\x13\xca\x9fU\xc4]\x92J{>\x98\xf2\x95\xa8\x13%s\xfa\xa6\x99A\xad\x18\x8c+\x12\xa6\xf4#wV\xaa3\x03\xdb\x11\x04\xb1M\xbct\x19\xb5m{>\xfa\x0e_Y\xb9\xf8...'
    ),
  ],
  role='model'
) grounding_metadata=None partial=None turn_complete=None finish_reason=<FinishReason.STOP: 'STOP'> error_code=None error_message=None interrupted=None custom_metadata=None usage_metadata=GenerateContentResponseUsageMetadata(
  candidates_token_count=17,
  prompt_token_count=187,
  prompt_tokens_details=[
    ModalityTokenCount(
      modality=<MediaModality.TEXT: 'TEXT'>,
      token_count=187
    ),
  ],
  thoughts_token_count=83,
  total_token_count=287
) live_session_resumption_update=None input_transcription=None output_transcription=None
2025-09-20 11:43:47,830 - INFO - root - -- Before tool call hook executed.
2025-09-20 11:43:47,830 - INFO - root - Tool: extract_stock_info, 
Args: {'ticker': 'AAPL'}, 
ToolContext: <google.adk.sessions.state.State object at 0x000001C28822D670>
2025-09-20 11:43:48,118 - INFO - root - -- After tool call hook executed.
2025-09-20 11:43:48,119 - INFO - root - Tool: extract_stock_info, 
Args: {'ticker': 'AAPL'}, 
ToolContext: <google.adk.sessions.state.State object at 0x000001C28822D670>, 
Output: {'address1': 'One Apple Park Way', 'city': 'Cupertino', 'state': 'CA', 'zip': '95014', 'country': 'United States', 'phone': '(408) 996-1010', 'website': 'https://www.apple.com', 'industry': 'Consumer Electronics', 'industryKey': 'consumer-electronics', 'industryDisp': 'Consumer Electronics', 'sector': 'Technology', 'sectorKey': 'technology', 'sectorDisp': 'Technology', 'longBusinessSummary': 'Apple Inc. designs, manufactures, and markets smartphones, personal computers, tablets, wearables, and accessories worldwide. The company offers iPhone, a line of smartphones; Mac, a line of personal computers; iPad, a line of multi-purpose tablets; and wearables, home, and accessories comprising AirPods, Apple TV, Apple Watch, Beats products, and HomePod. It also provides AppleCare support and cloud services; and operates various platforms, including the App Store that allow customers to discover and download applications and digital content, such as books, music, video, games, and podcasts, as well as advertising services include third-party licensing arrangements and its own advertising platforms. In addition, the company offers various subscription-based services, such as Apple Arcade, a game subscription service; Apple Fitness+, a personalized fitness service; Apple Music, which offers users a curated listening experience with on-demand radio stations; Apple News+, a subscription news and magazine service; Apple TV+, which offers exclusive original content; Apple Card, a co-branded credit card; and Apple Pay, a cashless payment service, as well as licenses its intellectual property. The company serves consumers, and small and mid-sized businesses; and the education, enterprise, and government markets. It distributes third-party applications for its products through the App Store. The company also sells its products through its retail and online stores, and direct sales force; and third-party cellular network carriers, wholesalers, retailers, and resellers. Apple Inc. was founded in 1976 and is headquartered in Cupertino, California.', 'fullTimeEmployees': 150000, 'companyOfficers': [{'maxAge': 1, 'name': 'Mr. Timothy D. Cook', 'age': 63, 'title': 'CEO & Director', 'yearBorn': 1961, 'fiscalYear': 2024, 'totalPay': 16520856, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Ms. Katherine L. Adams', 'age': 60, 'title': 'Senior VP, General Counsel & Secretary', 'yearBorn': 1964, 'fiscalYear': 2024, 'totalPay': 5022182, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': "Ms. Deirdre  O'Brien", 'age': 57, 'title': 'Chief People Officer & Senior VP of Retail', 'yearBorn': 1967, 'fiscalYear': 2024, 'totalPay': 5022182, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Mr. Jeffrey E. Williams', 'age': 60, 'title': 'Senior Vice President of Design, Watch, & Health', 'yearBorn': 1964, 'fiscalYear': 2024, 'totalPay': 5020737, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Mr. Kevan  Parekh', 'age': 52, 'title': 'Senior VP & CFO', 'yearBorn': 1972, 'fiscalYear': 2024, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Mr. Sabih  Khan', 'title': 'Chief Operating Officer', 'fiscalYear': 2024, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Mr. Chris  Kondo', 'title': 'Senior Director of Corporate Accounting', 'fiscalYear': 2024, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Suhasini  Chandramouli', 'title': 'Director of Investor Relations', 'fiscalYear': 2024, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Ms. Kristin Huguet Quayle', 'title': 'Vice President of Worldwide Communications', 'fiscalYear': 2024, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Mr. Greg  Joswiak', 'title': 'Senior Vice President of Worldwide Marketing', 'fiscalYear': 2024, 'exercisedValue': 0, 'unexercisedValue': 0}], 'auditRisk': 7, 'boardRisk': 1, 'compensationRisk': 3, 'shareHolderRightsRisk': 1, 'overallRisk': 1, 'governanceEpochDate': 1756684800, 'compensationAsOfEpochDate': 1735603200, 'irWebsite': 'http://investor.apple.com/', 'executiveTeam': [], 'maxAge': 86400, 'priceHint': 2, 'previousClose': 237.88, 'open': 241.175, 'dayLow': 240.2106, 'dayHigh': 246.27, 'regularMarketPreviousClose': 237.88, 'regularMarketOpen': 241.175, 'regularMarketDayLow': 240.2106, 'regularMarketDayHigh': 246.3, 'dividendRate': 1.04, 'dividendYield': 0.42, 'exDividendDate': 1754870400, 'payoutRatio': 0.1533, 'fiveYearAvgDividendYield': 0.54, 'beta': 1.109, 'trailingPE': 37.31003, 'forwardPE': 29.542719, 'volume': 162456387, 'regularMarketVolume': 162456387, 'averageVolume': 56212347, 'averageVolume10days': 66513550, 'averageDailyVolume10Day': 66513550, 'bid': 240.0, 'ask': 258.21, 'bidSize': 1, 'askSize': 1, 'marketCap': 3643315585024, 'fiftyTwoWeekLow': 169.21, 'fiftyTwoWeekHigh': 260.1, 'priceToSalesTrailing12Months': 8.916038, 'fiftyDayAverage': 223.929, 'twoHundredDayAverage': 221.6535, 'trailingAnnualDividendRate': 1.01, 'trailingAnnualDividendYield': 0.004245838, 'currency': 'USD', 'tradeable': False, 'enterpriseValue': 3689641672704, 'profitMargins': 0.24295999, 'floatShares': 14814419318, 'sharesOutstanding': 14840390000, 'sharesShort': 113582365, 'sharesShortPriorMonth': 104634941, 'sharesShortPreviousMonthDate': 1753920000, 'dateShortInterest': 1756425600, 'sharesPercentSharesOut': 0.0077, 'heldPercentInsiders': 0.0197, 'heldPercentInstitutions': 0.63643, 'shortRatio': 1.95, 'shortPercentOfFloat': 0.0077, 'impliedSharesOutstanding': 15318899712, 'bookValue': 4.431, 'priceToBook': 55.405098, 'lastFiscalYearEnd': 1727481600, 'nextFiscalYearEnd': 1759017600, 'mostRecentQuarter': 1751068800, 'earningsQuarterlyGrowth': 0.093, 'netIncomeToCommon': 99280003072, 'trailingEps': 6.58, 'forwardEps': 8.31, 'lastSplitFactor': '4:1', 'lastSplitDate': 1598832000, 'enterpriseToRevenue': 9.029, 'enterpriseToEbitda': 26.039, '52WeekChange': 0.08402884, 'SandP52WeekChange': 0.1653893, 'lastDividendValue': 0.26, 'lastDividendDate': 1754870400, 'quoteType': 'EQUITY', 'currentPrice': 245.5, 'targetHighPrice': 300.0, 'targetLowPrice': 175.0, 'targetMeanPrice': 241.31557, 'targetMedianPrice': 243.0, 'recommendationMean': 2.02128, 'recommendationKey': 'buy', 'numberOfAnalystOpinions': 40, 'totalCash': 55372001280, 'totalCashPerShare': 3.731, 'ebitda': 141696008192, 'totalDebt': 101698002944, 'quickRatio': 0.724, 'currentRatio': 0.868, 'totalRevenue': 408624988160, 'debtToEquity': 154.486, 'revenuePerShare': 27.173, 'returnOnAssets': 0.24545999, 'returnOnEquity': 1.49814, 'grossProfits': 190739005440, 'freeCashflow': 94873747456, 'operatingCashflow': 108564996096, 'earningsGrowth': 0.121, 'revenueGrowth': 0.096, 'grossMargins': 0.46678, 'ebitdaMargins': 0.34675997, 'operatingMargins': 0.29990998, 'financialCurrency': 'USD', 'symbol': 'AAPL', 'language': 'en-US', 'region': 'US', 'typeDisp': 'Equity', 'quoteSourceName': 'Delayed Quote', 'triggerable': True, 'customPriceAlertConfidence': 'HIGH', 'marketState': 'CLOSED', 'corporateActions': [], 'postMarketTime': 1758326399, 'regularMarketTime': 1758312002, 'exchange': 'NMS', 'messageBoardId': 'finmb_24937', 'exchangeTimezoneName': 'America/New_York', 'exchangeTimezoneShortName': 'EDT', 'gmtOffSetMilliseconds': -14400000, 'market': 'us_market', 'esgPopulated': False, 'regularMarketChangePercent': 3.20329, 'regularMarketPrice': 245.5, 'fiftyTwoWeekLowChangePercent': 0.4508598, 'fiftyTwoWeekRange': '169.21 - 260.1', 'fiftyTwoWeekHighChange': -14.600006, 'fiftyTwoWeekHighChangePercent': -0.05613228, 'fiftyTwoWeekChangePercent': 8.402884, 'dividendDate': 1755129600, 'earningsTimestamp': 1753992000, 'earningsTimestampStart': 1761854400, 'earningsTimestampEnd': 1761854400, 'earningsCallTimestampStart': 1753995600, 'earningsCallTimestampEnd': 1753995600, 'isEarningsDateEstimate': True, 'epsTrailingTwelveMonths': 6.58, 'epsForward': 8.31, 'epsCurrentYear': 7.38448, 'priceEpsCurrentYear': 33.2454, 'fiftyDayAverageChange': 21.571, 'fiftyDayAverageChangePercent': 0.09632964, 'twoHundredDayAverageChange': 23.846497, 'twoHundredDayAverageChangePercent': 0.107584566, 'sourceInterval': 15, 'exchangeDataDelayedBy': 0, 'averageAnalystRating': '2.0 - Buy', 'cryptoTradeable': False, 'shortName': 'Apple Inc.', 'longName': 'Apple Inc.', 'hasPrePostMarketData': True, 'firstTradeDateMilliseconds': 345479400000, 'postMarketChangePercent': 0.07739407, 'postMarketPrice': 245.69, 'postMarketChange': 0.19000244, 'regularMarketChange': 7.62, 'regularMarketDayRange': '240.2106 - 246.3', 'fullExchangeName': 'NasdaqGS', 'averageDailyVolume3Month': 56212347, 'fiftyTwoWeekLowChange': 76.28999, 'displayName': 'Apple', 'trailingPegRatio': 2.3591}
2025-09-20 11:43:48,120 - INFO - root - -- Before model call hook executed.
2025-09-20 11:43:48,121 - INFO - root - CallbackContext: {'history': "\nUser: What is the stock price of aapl?\nAgent: The current stock price of Apple (AAPL) is $245.50. The day's high was $246.30 and the day's low was $240.21.", 'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 6}, 
LLM_Request: model='gemini-2.5-flash' contents=[Content(
  parts=[
    Part(
      text='What was the opening price of AAPL?'
    ),
  ],
  role='user'
), Content(
  parts=[
    Part(
      function_call=FunctionCall(
        args={
          'ticker': 'AAPL'
        },
        name='extract_stock_info'
      ),
      thought_signature=b'\n\xf6\x02\x01\xd1\xed\x8ao\xc3\x8e\x17k\xddp\xba\x84\x8f\x8eTf\x1a\xe7R\xe1\xfc\xb2\xe5.\x8dc\xb7\xa2\x9f\xc4K\x94\xc7V#\xe9\xf5H\x7f\x9c*\x13\xca\x9fU\xc4]\x92J{>\x98\xf2\x95\xa8\x13%s\xfa\xa6\x99A\xad\x18\x8c+\x12\xa6\xf4#wV\xaa3\x03\xdb\x11\x04\xb1M\xbct\x19\xb5m{>\xfa\x0e_Y\xb9\xf8...'
    ),
  ],
  role='model'
), Content(
  parts=[
    Part(
      function_response=FunctionResponse(
        name='extract_stock_info',
        response=<dict len=180>
      )
    ),
  ],
  role='user'
)] config=GenerateContentConfig(
  system_instruction="""you can gather information about stocks using yfinance api, 
you can reflect upon the result and provide comprehensive details using data. Previous agent output: 
User: What is the stock price of aapl?
Agent: The current stock price of Apple (AAPL) is $245.50. The day's high was $246.30 and the day's low was $240.21.

You are an agent. Your internal name is "info_gather_agent".

 The description about you is "analyse provided ticker symbol"""",
  tools=[
    Tool(
      function_declarations=[
        FunctionDeclaration(
          description="""
Extract stock information for a given ticker symbol.
ticker - string ticker symbol for the stock
""",
          name='extract_stock_info',
          parameters=Schema(
            properties={
              <... Max depth ...>: <... Max depth ...>
            },
            required=[
              <... Max depth ...>,
            ],
            type=<Type.OBJECT: 'OBJECT'>
          )
        ),
      ]
    ),
  ]
) live_connect_config=LiveConnectConfig() tools_dict={'extract_stock_info': <google.adk.tools.function_tool.FunctionTool object at 0x000001C288225E00>}
2025-09-20 11:43:48,677 - INFO - google_adk.google.adk.models.google_llm - Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
2025-09-20 11:43:48,678 - INFO - google_genai.models - AFC is enabled with max remote calls: 10.
2025-09-20 11:43:49,273 - INFO - google_adk.google.adk.models.google_llm - Response received from the model.
2025-09-20 11:43:49,274 - INFO - root - -- After model call hook executed.
2025-09-20 11:43:49,274 - INFO - root - CallbackContext: {'history': "\nUser: What is the stock price of aapl?\nAgent: The current stock price of Apple (AAPL) is $245.50. The day's high was $246.30 and the day's low was $240.21.", 'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 6}, 
LLM_Response: content=Content(
  parts=[
    Part(
      text='The opening price of Apple (AAPL) was $241.175.'
    ),
  ],
  role='model'
) grounding_metadata=None partial=None turn_complete=None finish_reason=<FinishReason.STOP: 'STOP'> error_code=None error_message=None interrupted=None custom_metadata=None usage_metadata=GenerateContentResponseUsageMetadata(
  candidates_token_count=18,
  prompt_token_count=3567,
  prompt_tokens_details=[
    ModalityTokenCount(
      modality=<MediaModality.TEXT: 'TEXT'>,
      token_count=3567
    ),
  ],
  total_token_count=3585
) live_session_resumption_update=None input_transcription=None output_transcription=None
2025-09-20 11:43:49,275 - INFO - root - -- After agent call hook executed.
2025-09-20 11:43:49,275 - INFO - root - CallbackContext: {'history': "\nUser: What is the stock price of aapl?\nAgent: The current stock price of Apple (AAPL) is $245.50. The day's high was $246.30 and the day's low was $240.21.", 'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 6, 'result': 'The opening price of Apple (AAPL) was $241.175.'}
2025-09-20 11:43:49,275 - INFO - root - ---- After tool call hook executed.
2025-09-20 11:43:49,275 - INFO - root - Tool: info_gather_agent, 
Args: {'request': 'What was the opening price of AAPL?'}, 
ToolContext: <google.adk.sessions.state.State object at 0x000001C2881E2C90>, 
Output: The opening price of Apple (AAPL) was $241.175.
2025-09-20 11:43:49,281 - INFO - root - ------ Before model call hook executed.
2025-09-20 11:43:49,282 - INFO - root - CallbackContext: {'history': "\nUser: What is the stock price of aapl?\nAgent: The current stock price of Apple (AAPL) is $245.50. The day's high was $246.30 and the day's low was $240.21.", 'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 7, 'result': 'The opening price of Apple (AAPL) was $241.175.'}, 
LLM_Request: model='gemini-2.5-flash' contents=[Content(
  parts=[
    Part(
      text='What is the delta between opening and closing price?'
    ),
  ],
  role='user'
), Content(
  parts=[
    Part(
      function_call=FunctionCall(
        args={
          'request': 'What was the opening price of AAPL?'
        },
        name='info_gather_agent'
      ),
      thought_signature=b"\n\xd6\x02\x01\xd1\xed\x8aoc\xee\\c\x8en\xea\x7f\xd7?\x91\x0b0\x9c\xa9\x14E\xd8\x1e44\x9d\xc9\xd2\xd3\x94\x17Wt\xf5\xd2b\xdc_X\x0b\x0fT\x05fu\xdd0K\x9d\x01(\xcf5\x9c\xd7'\xad#\x90\xbe`\x01\x90\x96w2\xf1C\xd4g\x88s\xc2\x14\xf9 |\x12\xec\xc8Us\x99\x1a\x1b\xa4C|\xf1-\x95k6...'
    ),
  ],
  role='model'
), Content(
  parts=[
    Part(
      function_response=FunctionResponse(
        name='info_gather_agent',
        response={
          'result': 'The opening price of Apple (AAPL) was $241.175.'
        }
      )
    ),
  ],
  role='user'
)] config=GenerateContentConfig(
  system_instruction=""" you are a stock analyst who can use other agents to suppliment the analysis by gathering information.
History: 
User: What is the stock price of aapl?
Agent: The current stock price of Apple (AAPL) is $245.50. The day's high was $246.30 and the day's low was $240.21.

You are an agent. Your internal name is "root_agent".

 The description about you is "Root agent to coordinate stock analysis"""",
  tools=[
    Tool(
      function_declarations=[
        FunctionDeclaration(
          description='analyse provided ticker symbol',
          name='info_gather_agent',
          parameters=Schema(
            properties={
              <... Max depth ...>: <... Max depth ...>
            },
            required=[
              <... Max depth ...>,
            ],
            type=<Type.OBJECT: 'OBJECT'>
          )
        ),
      ]
    ),
  ]
) live_connect_config=LiveConnectConfig() tools_dict={'info_gather_agent': <google.adk.tools.agent_tool.AgentTool object at 0x000001C2877557F0>}
2025-09-20 11:43:49,840 - INFO - google_adk.google.adk.models.google_llm - Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
2025-09-20 11:43:49,840 - INFO - google_genai.models - AFC is enabled with max remote calls: 10.
2025-09-20 11:43:50,720 - INFO - google_adk.google.adk.models.google_llm - Response received from the model.
2025-09-20 11:43:50,720 - WARNING - google_genai.types - Warning: there are non-text parts in the response: ['thought_signature'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
2025-09-20 11:43:50,720 - INFO - root - ------ After model call hook executed.
2025-09-20 11:43:50,720 - INFO - root - CallbackContext: {'history': "\nUser: What is the stock price of aapl?\nAgent: The current stock price of Apple (AAPL) is $245.50. The day's high was $246.30 and the day's low was $240.21.", 'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 7, 'result': 'The opening price of Apple (AAPL) was $241.175.'}, 
LLM_Response: content=Content(
  parts=[
    Part(
      text='The opening price was $241.175 and the closing price was $245.50. The delta between the opening and closing price for AAPL is $4.325.',
      thought_signature=b'\n\xe3\x01\x01\xd1\xed\x8aoG3^I\xe28B\xa6\x84\xb8\xe6\xf3\x0b\xaa\x99\xfd\xe7CS_\x1f\xe9]\xee\x8bf\x8dX\x8f2 /5d\xddX\xbd\x16~b\xc2\xde\x99\xe4\x08\xdc\xb2\xd5\xd4\xff\r}`\x10\x1cq\r\t\x85\x81\x17\x8f\n\x1b\xb9\xcb\xc0\xc2\xc5\xa4z\x03ti\xc2\xfd\x15\xa8\xaa\xa3\xc0j~\xfb+8e\xa0\x8a...'
    ),
  ],
  role='model'
) grounding_metadata=None partial=None turn_complete=None finish_reason=<FinishReason.STOP: 'STOP'> error_code=None error_message=None interrupted=None custom_metadata=None usage_metadata=GenerateContentResponseUsageMetadata(
  candidates_token_count=44,
  prompt_token_count=222,
  prompt_tokens_details=[
    ModalityTokenCount(
      modality=<MediaModality.TEXT: 'TEXT'>,
      token_count=222
    ),
  ],
  thoughts_token_count=55,
  total_token_count=321
) live_session_resumption_update=None input_transcription=None output_transcription=None
2025-09-20 11:43:50,721 - INFO - root - -- After agent call hook executed.
2025-09-20 11:43:50,721 - INFO - root - CallbackContext: ('e-675f9933-b4d6-4abc-a233-2b741b9f50b3', {'history': "\nUser: What is the stock price of aapl?\nAgent: The current stock price of Apple (AAPL) is $245.50. The day's high was $246.30 and the day's low was $240.21.", 'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 7, 'result': 'The opening price was $241.175 and the closing price was $245.50. The delta between the opening and closing price for AAPL is $4.325.'}, Content(
  parts=[
    Part(
      text='What is the delta between opening and closing price?'
    ),
  ],
  role='user'
))
2025-09-20 11:43:50,741 - INFO - werkzeug - 127.0.0.1 - - [20/Sep/2025 11:43:50] "POST /agent_endpoint HTTP/1.1" 200 -
2025-09-20 11:43:57,722 - INFO - __main__ - Received request with query: What is the stock price of ibm?, session_id: session_456, user_id: user_456
2025-09-20 11:43:57,723 - INFO - root - -- Before agent call hook executed.
2025-09-20 11:43:57,723 - INFO - root - CallbackContext: ('e-7a279d7b-243a-47aa-b0c6-bde8e4404d89', {'session_id': 'session_456', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 0}, Content(
  parts=[
    Part(
      text='What is the stock price of ibm?'
    ),
  ],
  role='user'
))
2025-09-20 11:43:57,743 - INFO - root - ------ Before model call hook executed.
2025-09-20 11:43:57,743 - INFO - root - CallbackContext: {'session_id': 'session_456', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 1}, 
LLM_Request: model='gemini-2.5-flash' contents=[Content(
  parts=[
    Part(
      text='What is the stock price of ibm?'
    ),
  ],
  role='user'
)] config=GenerateContentConfig(
  system_instruction=""" you are a stock analyst who can use other agents to suppliment the analysis by gathering information.
History: 

You are an agent. Your internal name is "root_agent".

 The description about you is "Root agent to coordinate stock analysis"""",
  tools=[
    Tool(
      function_declarations=[
        FunctionDeclaration(
          description='analyse provided ticker symbol',
          name='info_gather_agent',
          parameters=Schema(
            properties={
              <... Max depth ...>: <... Max depth ...>
            },
            required=[
              <... Max depth ...>,
            ],
            type=<Type.OBJECT: 'OBJECT'>
          )
        ),
      ]
    ),
  ]
) live_connect_config=LiveConnectConfig() tools_dict={'info_gather_agent': <google.adk.tools.agent_tool.AgentTool object at 0x000001C2877557F0>}
2025-09-20 11:43:58,315 - INFO - google_adk.google.adk.models.google_llm - Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
2025-09-20 11:43:58,315 - INFO - google_genai.models - AFC is enabled with max remote calls: 10.
2025-09-20 11:43:59,249 - INFO - google_adk.google.adk.models.google_llm - Response received from the model.
2025-09-20 11:43:59,249 - WARNING - google_genai.types - Warning: there are non-text parts in the response: ['thought_signature', 'function_call'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
2025-09-20 11:43:59,250 - INFO - root - ------ After model call hook executed.
2025-09-20 11:43:59,250 - INFO - root - CallbackContext: {'session_id': 'session_456', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 1}, 
LLM_Response: content=Content(
  parts=[
    Part(
      function_call=FunctionCall(
        args={
          'request': 'stock price of ibm'
        },
        name='info_gather_agent'
      ),
      thought_signature=b'\n\xa4\x04\x01\xd1\xed\x8ao\x12\xde\xf3"J\x01\xfb\xdd\xbe\xdbK\r\xdd\x04\x87M f(\xec\xea}A]\xc1\x1c8\x80*E\xb9\xe00\x1f\xd7Eya\xbf\x8c\xd1>|\x8a\xab\xe0\x1c\xb53\xc5\xc1\xbb\x9727>\x01\xc9W\x08C\xbe~DyY\xb2\xff\xb17\x0c\x14\x91\xb1\x86\x12n\xaa\xb7\x1dnH\x84\xc1\xf2@a)\x9d...'
    ),
  ],
  role='model'
) grounding_metadata=None partial=None turn_complete=None finish_reason=<FinishReason.STOP: 'STOP'> error_code=None error_message=None interrupted=None custom_metadata=None usage_metadata=GenerateContentResponseUsageMetadata(
  candidates_token_count=21,
  prompt_token_count=101,
  prompt_tokens_details=[
    ModalityTokenCount(
      modality=<MediaModality.TEXT: 'TEXT'>,
      token_count=101
    ),
  ],
  thoughts_token_count=113,
  total_token_count=235
) live_session_resumption_update=None input_transcription=None output_transcription=None
2025-09-20 11:43:59,250 - INFO - root - ---- Before tool call hook executed.
2025-09-20 11:43:59,250 - INFO - root - Tool: info_gather_agent, 
Args: {'request': 'stock price of ibm'}, 
ToolContext: <google.adk.sessions.state.State object at 0x000001C28822F5F0>
2025-09-20 11:43:59,254 - INFO - root - -- Before agent call hook executed.
2025-09-20 11:43:59,254 - INFO - root - CallbackContext: {'session_id': 'session_456', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 2}
2025-09-20 11:43:59,255 - INFO - root - -- Before model call hook executed.
2025-09-20 11:43:59,255 - INFO - root - CallbackContext: {'session_id': 'session_456', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 2}, 
LLM_Request: model='gemini-2.5-flash' contents=[Content(
  parts=[
    Part(
      text='stock price of ibm'
    ),
  ],
  role='user'
)] config=GenerateContentConfig(
  system_instruction="""you can gather information about stocks using yfinance api, 
you can reflect upon the result and provide comprehensive details using data. Previous agent output: 

You are an agent. Your internal name is "info_gather_agent".

 The description about you is "analyse provided ticker symbol"""",
  tools=[
    Tool(
      function_declarations=[
        FunctionDeclaration(
          description="""
Extract stock information for a given ticker symbol.
ticker - string ticker symbol for the stock
""",
          name='extract_stock_info',
          parameters=Schema(
            properties={
              <... Max depth ...>: <... Max depth ...>
            },
            required=[
              <... Max depth ...>,
            ],
            type=<Type.OBJECT: 'OBJECT'>
          )
        ),
      ]
    ),
  ]
) live_connect_config=LiveConnectConfig() tools_dict={'extract_stock_info': <google.adk.tools.function_tool.FunctionTool object at 0x000001C2877C2C40>}
2025-09-20 11:43:59,822 - INFO - google_adk.google.adk.models.google_llm - Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
2025-09-20 11:43:59,822 - INFO - google_genai.models - AFC is enabled with max remote calls: 10.
2025-09-20 11:44:00,729 - INFO - google_adk.google.adk.models.google_llm - Response received from the model.
2025-09-20 11:44:00,729 - WARNING - google_genai.types - Warning: there are non-text parts in the response: ['thought_signature', 'function_call'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
2025-09-20 11:44:00,729 - INFO - root - -- After model call hook executed.
2025-09-20 11:44:00,730 - INFO - root - CallbackContext: {'session_id': 'session_456', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 2}, 
LLM_Response: content=Content(
  parts=[
    Part(
      function_call=FunctionCall(
        args={
          'ticker': 'IBM'
        },
        name='extract_stock_info'
      ),
      thought_signature=b'\n\x9f\x02\x01\xd1\xed\x8aoN6\xb7\x1cj\xbc\x84\x98:\xf60\xb0\x80\xaeA\x8b\x87\x19x|\xcc\xbc1\r\x9c\xb8\x0e9\x17B\xe3\xe5,\xfc\nU\x87\x92\xd5\x02B\xc0/G\xf8>(\x93\x1bE)k\xaa\xd1S\xa4jY\xa0\xb6\xa1j\x15W\xae\xb6.=\xe6\x1a\xe7\x92v\x9em\xf2\xa9Ir0Lu\x88\x16.U\xf2\xe6O...'
    ),
  ],
  role='model'
) grounding_metadata=None partial=None turn_complete=None finish_reason=<FinishReason.STOP: 'STOP'> error_code=None error_message=None interrupted=None custom_metadata=None usage_metadata=GenerateContentResponseUsageMetadata(
  candidates_token_count=17,
  prompt_token_count=122,
  prompt_tokens_details=[
    ModalityTokenCount(
      modality=<MediaModality.TEXT: 'TEXT'>,
      token_count=122
    ),
  ],
  thoughts_token_count=65,
  total_token_count=204
) live_session_resumption_update=None input_transcription=None output_transcription=None
2025-09-20 11:44:00,730 - INFO - root - -- Before tool call hook executed.
2025-09-20 11:44:00,730 - INFO - root - Tool: extract_stock_info, 
Args: {'ticker': 'IBM'}, 
ToolContext: <google.adk.sessions.state.State object at 0x000001C28822F8F0>
2025-09-20 11:44:01,336 - INFO - root - -- After tool call hook executed.
2025-09-20 11:44:01,336 - INFO - root - Tool: extract_stock_info, 
Args: {'ticker': 'IBM'}, 
ToolContext: <google.adk.sessions.state.State object at 0x000001C28822F8F0>, 
Output: {'address1': 'One New Orchard Road', 'city': 'Armonk', 'state': 'NY', 'zip': '10504', 'country': 'United States', 'phone': '914 499 1900', 'website': 'https://www.ibm.com', 'industry': 'Information Technology Services', 'industryKey': 'information-technology-services', 'industryDisp': 'Information Technology Services', 'sector': 'Technology', 'sectorKey': 'technology', 'sectorDisp': 'Technology', 'longBusinessSummary': "International Business Machines Corporation, together with its subsidiaries, provides integrated solutions and services in the Americas, Europe, the Middle East, Africa, and the Asia Pacific. It operates through Software, Consulting, Infrastructure, and Financing segments. The Software segment offers hybrid cloud and AI platforms that allows clients to realize their digital and AI transformations across the applications, data, and environments in which they operate. Its Consulting segment focuses on skills integration for strategy, experience, technology, and operations by domain and industry. The Infrastructure segment provides on-premises and cloud based server, and storage solutions, as well as life-cycle services for hybrid cloud infrastructure deployment. Its Financing segment offers client and commercial financing, facilitates IBM clients' acquisition of hardware, software, and services. It has strategic partnership with various companies, including hyperscalers, service providers, system integrators, and software and hardware vendors that includes Adobe, Amazon Web services, Microsoft, Oracle, Salesforce, Samsung Electronics and SAP, and others. The company was formerly known as Computing-Tabulating-Recording Co. International Business Machines Corporation was incorporated in 1911 and is headquartered in Armonk, New York.", 'fullTimeEmployees': 270300, 'companyOfficers': [{'maxAge': 1, 'name': 'Mr. Arvind  Krishna', 'age': 61, 'title': 'CEO, President & Chairman', 'yearBorn': 1963, 'fiscalYear': 2024, 'totalPay': 5782161, 'exercisedValue': 0, 'unexercisedValue': 10077852}, {'maxAge': 1, 'name': 'Mr. Gary D. Cohn', 'age': 63, 'title': 'Executive Vice Chairman', 'yearBorn': 1961, 'fiscalYear': 2024, 'totalPay': 3062388, 'exercisedValue': 0, 'unexercisedValue': 4992274}, {'maxAge': 1, 'name': 'Mr. James J. Kavanaugh', 'age': 57, 'title': 'CFO and Senior VP of Finance & Operations', 'yearBorn': 1967, 'fiscalYear': 2024, 'totalPay': 3059935, 'exercisedValue': 0, 'unexercisedValue': 6370904}, {'maxAge': 1, 'name': 'Ms. Anne E. Robinson', 'age': 53, 'title': 'Senior VP & Chief Legal Officer', 'yearBorn': 1971, 'fiscalYear': 2024, 'totalPay': 1945090, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Mr. Robert D. Thomas', 'age': 75, 'title': 'Senior VP of Software & Chief Commercial Officer', 'yearBorn': 1949, 'fiscalYear': 2024, 'totalPay': 3083316, 'exercisedValue': 0, 'unexercisedValue': 5129684}, {'maxAge': 1, 'name': 'Olympia  McNerney', 'title': 'Global Head of Investor Relations', 'fiscalYear': 2024, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Mr. Jonathan H. Adashek', 'title': 'Senior Vice President of Marketing & Communications', 'fiscalYear': 2024, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Ms. Nickle Jaclyn LaMoreaux', 'age': 44, 'title': 'Senior VP & Chief Human Resources Officer', 'yearBorn': 1980, 'fiscalYear': 2024, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Dr. Bernard S. Meyerson Ph.D.', 'title': 'Chief Innovation Officer Emeritus', 'fiscalYear': 2024, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Mr. Alexander Franz Stern', 'age': 58, 'title': 'Senior Vice President of Strategy & M&A', 'yearBorn': 1966, 'fiscalYear': 2024, 'exercisedValue': 0, 'unexercisedValue': 0}], 'auditRisk': 8, 'boardRisk': 7, 'compensationRisk': 8, 'shareHolderRightsRisk': 4, 'overallRisk': 7, 'governanceEpochDate': 1756684800, 'compensationAsOfEpochDate': 1735603200, 'irWebsite': 'http://www.ibm.com/investor/?lnk=ftif', 'executiveTeam': [], 'maxAge': 86400, 'priceHint': 2, 'previousClose': 265.0, 'open': 266.05, 'dayLow': 263.64, 'dayHigh': 267.87, 'regularMarketPreviousClose': 265.0, 'regularMarketOpen': 266.05, 'regularMarketDayLow': 263.64, 'regularMarketDayHigh': 267.87, 'dividendRate': 6.72, 'dividendYield': 2.52, 'exDividendDate': 1754611200, 'payoutRatio': 1.079, 'fiveYearAvgDividendYield': 4.32, 'beta': 0.697, 'trailingPE': 42.89855, 'forwardPE': 25.108389, 'volume': 9848070, 'regularMarketVolume': 9848070, 'averageVolume': 4773422, 'averageVolume10days': 4963030, 'averageDailyVolume10Day': 4963030, 'bid': 266.0, 'ask': 266.7, 'bidSize': 4, 'askSize': 4, 'marketCap': 248156717056, 'fiftyTwoWeekLow': 203.51, 'fiftyTwoWeekHigh': 296.16, 'priceToSalesTrailing12Months': 3.8750267, 'fiftyDayAverage': 255.6432, 'twoHundredDayAverage': 251.20335, 'trailingAnnualDividendRate': 6.69, 'trailingAnnualDividendYield': 0.025245283, 'currency': 'USD', 'tradeable': False, 'enterpriseValue': 300507725824, 'profitMargins': 0.091079995, 'floatShares': 929395378, 'sharesOutstanding': 931519242, 'sharesShort': 14280231, 'sharesShortPriorMonth': 15617770, 'sharesShortPreviousMonthDate': 1753920000, 'dateShortInterest': 1756425600, 'sharesPercentSharesOut': 0.0153, 'heldPercentInsiders': 0.00122, 'heldPercentInstitutions': 0.65148, 'shortRatio': 2.86, 'shortPercentOfFloat': 0.017, 'impliedSharesOutstanding': 931519242, 'bookValue': 29.531, 'priceToBook': 9.0210285, 'lastFiscalYearEnd': 1735603200, 'nextFiscalYearEnd': 1767139200, 'mostRecentQuarter': 1751241600, 'earningsQuarterlyGrowth': 0.196, 'netIncomeToCommon': 5857999872, 'trailingEps': 6.21, 'forwardEps': 10.61, 'lastSplitFactor': '1046:1000', 'lastSplitDate': 1635984000, 'enterpriseToRevenue': 4.693, 'enterpriseToEbitda': 21.188, '52WeekChange': 0.20816326, 'SandP52WeekChange': 0.1653893, 'lastDividendValue': 1.68, 'lastDividendDate': 1754611200, 'quoteType': 'EQUITY', 'currentPrice': 266.4, 'targetHighPrice': 350.0, 'targetLowPrice': 198.0, 'targetMeanPrice': 281.2463, 'targetMedianPrice': 290.0, 'recommendationMean': 2.52381, 'recommendationKey': 'hold', 'numberOfAnalystOpinions': 19, 'totalCash': 15447000064, 'totalCashPerShare': 16.583, 'ebitda': 14183000064, 'totalDebt': 67719000064, 'quickRatio': 0.76, 'currentRatio': 0.908, 'totalRevenue': 64040001536, 'debtToEquity': 245.465, 'revenuePerShare': 69.074, 'returnOnAssets': 0.048130002, 'returnOnEquity': 0.22665001, 'grossProfits': 36868001792, 'freeCashflow': 13859999744, 'operatingCashflow': 13281999872, 'earningsGrowth': 0.177, 'revenueGrowth': 0.077, 'grossMargins': 0.5757, 'ebitdaMargins': 0.22147, 'operatingMargins': 0.18319, 'financialCurrency': 'USD', 'symbol': 'IBM', 'language': 'en-US', 'region': 'US', 'typeDisp': 'Equity', 'quoteSourceName': 'Delayed Quote', 'triggerable': True, 'customPriceAlertConfidence': 'HIGH', 'fullExchangeName': 'NYSE', 'averageDailyVolume3Month': 4773422, 'fiftyTwoWeekLowChange': 62.89, 'fiftyTwoWeekLowChangePercent': 0.3090266, 'fiftyTwoWeekRange': '203.51 - 296.16', 'fiftyTwoWeekHighChange': -29.76001, 'fiftyTwoWeekHighChangePercent': -0.100486256, 'fiftyTwoWeekChangePercent': 20.816326, 'dividendDate': 1757462400, 'earningsTimestamp': 1761163200, 'earningsTimestampStart': 1761163200, 'earningsTimestampEnd': 1761163200, 'earningsCallTimestampStart': 1761166800, 'earningsCallTimestampEnd': 1761166800, 'isEarningsDateEstimate': False, 'epsTrailingTwelveMonths': 6.21, 'epsForward': 10.61, 'epsCurrentYear': 11.15159, 'priceEpsCurrentYear': 23.88897, 'fiftyDayAverageChange': 10.75679, 'fiftyDayAverageChangePercent': 0.042077355, 'twoHundredDayAverageChange': 15.19664, 'twoHundredDayAverageChangePercent': 0.06049537, 'sourceInterval': 15, 'exchangeDataDelayedBy': 0, 'averageAnalystRating': '2.5 - Hold', 'cryptoTradeable': False, 'corporateActions': [], 'postMarketTime': 1758326393, 'regularMarketTime': 1758312002, 'exchange': 'NYQ', 'messageBoardId': 'finmb_112350', 'exchangeTimezoneName': 'America/New_York', 'exchangeTimezoneShortName': 'EDT', 'gmtOffSetMilliseconds': -14400000, 'market': 'us_market', 'esgPopulated': False, 'regularMarketChangePercent': 0.5283, 'regularMarketPrice': 266.4, 'shortName': 'International Business Machines', 'longName': 'International Business Machines Corporation', 'marketState': 'CLOSED', 'postMarketChangePercent': 0.07507966, 'postMarketPrice': 266.6, 'postMarketChange': 0.2000122, 'regularMarketChange': 1.39999, 'regularMarketDayRange': '263.64 - 267.87', 'hasPrePostMarketData': True, 'firstTradeDateMilliseconds': -252322200000, 'displayName': 'IBM', 'trailingPegRatio': 1.6457}
2025-09-20 11:44:01,338 - INFO - root - -- Before model call hook executed.
2025-09-20 11:44:01,339 - INFO - root - CallbackContext: {'session_id': 'session_456', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 2}, 
LLM_Request: model='gemini-2.5-flash' contents=[Content(
  parts=[
    Part(
      text='stock price of ibm'
    ),
  ],
  role='user'
), Content(
  parts=[
    Part(
      function_call=FunctionCall(
        args={
          'ticker': 'IBM'
        },
        name='extract_stock_info'
      ),
      thought_signature=b'\n\x9f\x02\x01\xd1\xed\x8aoN6\xb7\x1cj\xbc\x84\x98:\xf60\xb0\x80\xaeA\x8b\x87\x19x|\xcc\xbc1\r\x9c\xb8\x0e9\x17B\xe3\xe5,\xfc\nU\x87\x92\xd5\x02B\xc0/G\xf8>(\x93\x1bE)k\xaa\xd1S\xa4jY\xa0\xb6\xa1j\x15W\xae\xb6.=\xe6\x1a\xe7\x92v\x9em\xf2\xa9Ir0Lu\x88\x16.U\xf2\xe6O...'
    ),
  ],
  role='model'
), Content(
  parts=[
    Part(
      function_response=FunctionResponse(
        name='extract_stock_info',
        response=<dict len=180>
      )
    ),
  ],
  role='user'
)] config=GenerateContentConfig(
  system_instruction="""you can gather information about stocks using yfinance api, 
you can reflect upon the result and provide comprehensive details using data. Previous agent output: 

You are an agent. Your internal name is "info_gather_agent".

 The description about you is "analyse provided ticker symbol"""",
  tools=[
    Tool(
      function_declarations=[
        FunctionDeclaration(
          description="""
Extract stock information for a given ticker symbol.
ticker - string ticker symbol for the stock
""",
          name='extract_stock_info',
          parameters=Schema(
            properties={
              <... Max depth ...>: <... Max depth ...>
            },
            required=[
              <... Max depth ...>,
            ],
            type=<Type.OBJECT: 'OBJECT'>
          )
        ),
      ]
    ),
  ]
) live_connect_config=LiveConnectConfig() tools_dict={'extract_stock_info': <google.adk.tools.function_tool.FunctionTool object at 0x000001C288172F90>}
2025-09-20 11:44:01,905 - INFO - google_adk.google.adk.models.google_llm - Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
2025-09-20 11:44:01,905 - INFO - google_genai.models - AFC is enabled with max remote calls: 10.
2025-09-20 11:44:03,034 - INFO - google_adk.google.adk.models.google_llm - Response received from the model.
2025-09-20 11:44:03,035 - INFO - root - -- After model call hook executed.
2025-09-20 11:44:03,035 - INFO - root - CallbackContext: {'session_id': 'session_456', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 2}, 
LLM_Response: content=Content(
  parts=[
    Part(
      text='The current stock price of IBM is $266.40.'
    ),
  ],
  role='model'
) grounding_metadata=None partial=None turn_complete=None finish_reason=<FinishReason.STOP: 'STOP'> error_code=None error_message=None interrupted=None custom_metadata=None usage_metadata=GenerateContentResponseUsageMetadata(
  candidates_token_count=15,
  prompt_token_count=3483,
  prompt_tokens_details=[
    ModalityTokenCount(
      modality=<MediaModality.TEXT: 'TEXT'>,
      token_count=3483
    ),
  ],
  total_token_count=3498
) live_session_resumption_update=None input_transcription=None output_transcription=None
2025-09-20 11:44:03,036 - INFO - root - -- After agent call hook executed.
2025-09-20 11:44:03,036 - INFO - root - CallbackContext: {'session_id': 'session_456', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 2, 'result': 'The current stock price of IBM is $266.40.'}
2025-09-20 11:44:03,036 - INFO - root - ---- After tool call hook executed.
2025-09-20 11:44:03,036 - INFO - root - Tool: info_gather_agent, 
Args: {'request': 'stock price of ibm'}, 
ToolContext: <google.adk.sessions.state.State object at 0x000001C28822F5F0>, 
Output: The current stock price of IBM is $266.40.
2025-09-20 11:44:03,043 - INFO - root - ------ Before model call hook executed.
2025-09-20 11:44:03,043 - INFO - root - CallbackContext: {'session_id': 'session_456', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 3, 'result': 'The current stock price of IBM is $266.40.'}, 
LLM_Request: model='gemini-2.5-flash' contents=[Content(
  parts=[
    Part(
      text='What is the stock price of ibm?'
    ),
  ],
  role='user'
), Content(
  parts=[
    Part(
      function_call=FunctionCall(
        args={
          'request': 'stock price of ibm'
        },
        name='info_gather_agent'
      ),
      thought_signature=b'\n\xa4\x04\x01\xd1\xed\x8ao\x12\xde\xf3"J\x01\xfb\xdd\xbe\xdbK\r\xdd\x04\x87M f(\xec\xea}A]\xc1\x1c8\x80*E\xb9\xe00\x1f\xd7Eya\xbf\x8c\xd1>|\x8a\xab\xe0\x1c\xb53\xc5\xc1\xbb\x9727>\x01\xc9W\x08C\xbe~DyY\xb2\xff\xb17\x0c\x14\x91\xb1\x86\x12n\xaa\xb7\x1dnH\x84\xc1\xf2@a)\x9d...'
    ),
  ],
  role='model'
), Content(
  parts=[
    Part(
      function_response=FunctionResponse(
        name='info_gather_agent',
        response={
          'result': 'The current stock price of IBM is $266.40.'
        }
      )
    ),
  ],
  role='user'
)] config=GenerateContentConfig(
  system_instruction=""" you are a stock analyst who can use other agents to suppliment the analysis by gathering information.
History: 

You are an agent. Your internal name is "root_agent".

 The description about you is "Root agent to coordinate stock analysis"""",
  tools=[
    Tool(
      function_declarations=[
        FunctionDeclaration(
          description='analyse provided ticker symbol',
          name='info_gather_agent',
          parameters=Schema(
            properties={
              <... Max depth ...>: <... Max depth ...>
            },
            required=[
              <... Max depth ...>,
            ],
            type=<Type.OBJECT: 'OBJECT'>
          )
        ),
      ]
    ),
  ]
) live_connect_config=LiveConnectConfig() tools_dict={'info_gather_agent': <google.adk.tools.agent_tool.AgentTool object at 0x000001C2877557F0>}
2025-09-20 11:44:03,612 - INFO - google_adk.google.adk.models.google_llm - Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
2025-09-20 11:44:03,613 - INFO - google_genai.models - AFC is enabled with max remote calls: 10.
2025-09-20 11:44:04,201 - INFO - google_adk.google.adk.models.google_llm - Response received from the model.
2025-09-20 11:44:04,201 - WARNING - google_genai.types - Warning: there are non-text parts in the response: ['thought_signature'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
2025-09-20 11:44:04,201 - INFO - root - ------ After model call hook executed.
2025-09-20 11:44:04,201 - INFO - root - CallbackContext: {'session_id': 'session_456', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 3, 'result': 'The current stock price of IBM is $266.40.'}, 
LLM_Response: content=Content(
  parts=[
    Part(
      text='The current stock price of IBM is $266.40.',
      thought_signature=b"\n\x9e\x01\x01\xd1\xed\x8aoT\xbbG\x95\xa6\xbb\xc8l\xdc\x9aB\xc5\x91\x07\xdd\x80\xc4\x03\xaa\x81\x00\xe4hi\x07\xcda\x12\x84!\xb9\xae\x97\xa57\xd8\xc1\x95\xc5x\x87\xa8z*\xd5Z\xf1'\xb8\xbc\x16\xe3\x16l\x05\x9dxa\xdf]\x1c\x16Hy\xfb\x1a\xd2\x0f']\xedB$\x9c\xf9\xc4\x80\x93\xbe\x94\xb5\xcc\x1c\xe5Aq\x1b\xa9\xa9...'
    ),
  ],
  role='model'
) grounding_metadata=None partial=None turn_complete=None finish_reason=<FinishReason.STOP: 'STOP'> error_code=None error_message=None interrupted=None custom_metadata=None usage_metadata=GenerateContentResponseUsageMetadata(
  candidates_token_count=15,
  prompt_token_count=153,
  prompt_tokens_details=[
    ModalityTokenCount(
      modality=<MediaModality.TEXT: 'TEXT'>,
      token_count=153
    ),
  ],
  thoughts_token_count=29,
  total_token_count=197
) live_session_resumption_update=None input_transcription=None output_transcription=None
2025-09-20 11:44:04,202 - INFO - root - -- After agent call hook executed.
2025-09-20 11:44:04,202 - INFO - root - CallbackContext: ('e-7a279d7b-243a-47aa-b0c6-bde8e4404d89', {'session_id': 'session_456', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 3, 'result': 'The current stock price of IBM is $266.40.'}, Content(
  parts=[
    Part(
      text='What is the stock price of ibm?'
    ),
  ],
  role='user'
))
2025-09-20 11:44:04,209 - INFO - werkzeug - 127.0.0.1 - - [20/Sep/2025 11:44:04] "POST /agent_endpoint HTTP/1.1" 200 -
2025-09-20 11:44:10,142 - INFO - __main__ - Received request with query: What stock symbol are we talking about?, session_id: session_123, user_id: user_456
2025-09-20 11:44:10,143 - INFO - root - -- Before agent call hook executed.
2025-09-20 11:44:10,143 - INFO - root - CallbackContext: ('e-fddaeb27-aa35-4a19-99cf-e284b1a7f7b4', {'history': "\nUser: What is the stock price of aapl?\nAgent: The current stock price of Apple (AAPL) is $245.50. The day's high was $246.30 and the day's low was $240.21.\nUser: What is the delta between opening and closing price?\nAgent: The opening price was $241.175 and the closing price was $245.50. The delta between the opening and closing price for AAPL is $4.325.", 'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 8}, Content(
  parts=[
    Part(
      text='What stock symbol are we talking about?'
    ),
  ],
  role='user'
))
2025-09-20 11:44:10,148 - INFO - root - ------ Before model call hook executed.
2025-09-20 11:44:10,148 - INFO - root - CallbackContext: {'history': "\nUser: What is the stock price of aapl?\nAgent: The current stock price of Apple (AAPL) is $245.50. The day's high was $246.30 and the day's low was $240.21.\nUser: What is the delta between opening and closing price?\nAgent: The opening price was $241.175 and the closing price was $245.50. The delta between the opening and closing price for AAPL is $4.325.", 'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 9}, 
LLM_Request: model='gemini-2.5-flash' contents=[Content(
  parts=[
    Part(
      text='What stock symbol are we talking about?'
    ),
  ],
  role='user'
)] config=GenerateContentConfig(
  system_instruction=""" you are a stock analyst who can use other agents to suppliment the analysis by gathering information.
History: 
User: What is the stock price of aapl?
Agent: The current stock price of Apple (AAPL) is $245.50. The day's high was $246.30 and the day's low was $240.21.
User: What is the delta between opening and closing price?
Agent: The opening price was $241.175 and the closing price was $245.50. The delta between the opening and closing price for AAPL is $4.325.

You are an agent. Your internal name is "root_agent".

 The description about you is "Root agent to coordinate stock analysis"""",
  tools=[
    Tool(
      function_declarations=[
        FunctionDeclaration(
          description='analyse provided ticker symbol',
          name='info_gather_agent',
          parameters=Schema(
            properties={
              <... Max depth ...>: <... Max depth ...>
            },
            required=[
              <... Max depth ...>,
            ],
            type=<Type.OBJECT: 'OBJECT'>
          )
        ),
      ]
    ),
  ]
) live_connect_config=LiveConnectConfig() tools_dict={'info_gather_agent': <google.adk.tools.agent_tool.AgentTool object at 0x000001C2877557F0>}
2025-09-20 11:44:10,710 - INFO - google_adk.google.adk.models.google_llm - Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
2025-09-20 11:44:10,710 - INFO - google_genai.models - AFC is enabled with max remote calls: 10.
2025-09-20 11:44:11,314 - INFO - google_adk.google.adk.models.google_llm - Response received from the model.
2025-09-20 11:44:11,314 - WARNING - google_genai.types - Warning: there are non-text parts in the response: ['thought_signature'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
2025-09-20 11:44:11,314 - INFO - root - ------ After model call hook executed.
2025-09-20 11:44:11,315 - INFO - root - CallbackContext: {'history': "\nUser: What is the stock price of aapl?\nAgent: The current stock price of Apple (AAPL) is $245.50. The day's high was $246.30 and the day's low was $240.21.\nUser: What is the delta between opening and closing price?\nAgent: The opening price was $241.175 and the closing price was $245.50. The delta between the opening and closing price for AAPL is $4.325.", 'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 9}, 
LLM_Response: content=Content(
  parts=[
    Part(
      text='We are talking about Apple (AAPL).',
      thought_signature=b'\n\x93\x02\x01\xd1\xed\x8ao\rE\xa2R8F\x96W\xa9_\x94\x1f\r\xeb\x84;\xe5\xcb\xd74\x1f\x0f\xea+\x17|t\x85\xf4\x06\x8a\xb2zs~\x10\xfcw]\xf6\xbb\x95\xdf\xba?Q\x8a\xa5\xa2\xd6\xd6\xc0\xbe\xd4\xd7B\xc4\xdc8\xd8\xec\xdf5\n\x9b\x8d\xc9\x00\xfe\xdeK\x9f\x8a^(zv\xcf\xe1\xc0?\x11\xb4(2\xf4\xc7\xef\x8b...'
    ),
  ],
  role='model'
) grounding_metadata=None partial=None turn_complete=None finish_reason=<FinishReason.STOP: 'STOP'> error_code=None error_message=None interrupted=None custom_metadata=None usage_metadata=GenerateContentResponseUsageMetadata(
  candidates_token_count=8,
  prompt_token_count=221,
  prompt_tokens_details=[
    ModalityTokenCount(
      modality=<MediaModality.TEXT: 'TEXT'>,
      token_count=221
    ),
  ],
  thoughts_token_count=53,
  total_token_count=282
) live_session_resumption_update=None input_transcription=None output_transcription=None
2025-09-20 11:44:11,316 - INFO - root - -- After agent call hook executed.
2025-09-20 11:44:11,316 - INFO - root - CallbackContext: ('e-fddaeb27-aa35-4a19-99cf-e284b1a7f7b4', {'history': "\nUser: What is the stock price of aapl?\nAgent: The current stock price of Apple (AAPL) is $245.50. The day's high was $246.30 and the day's low was $240.21.\nUser: What is the delta between opening and closing price?\nAgent: The opening price was $241.175 and the closing price was $245.50. The delta between the opening and closing price for AAPL is $4.325.", 'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 9, 'result': 'We are talking about Apple (AAPL).'}, Content(
  parts=[
    Part(
      text='What stock symbol are we talking about?'
    ),
  ],
  role='user'
))
2025-09-20 11:44:11,322 - INFO - werkzeug - 127.0.0.1 - - [20/Sep/2025 11:44:11] "POST /agent_endpoint HTTP/1.1" 200 -
2025-09-20 11:55:24,519 - INFO - werkzeug - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-09-20 11:55:24,519 - INFO - werkzeug - [33mPress CTRL+C to quit[0m
2025-09-20 11:55:24,526 - INFO - werkzeug -  * Restarting with watchdog (windowsapi)
2025-09-20 11:55:28,501 - WARNING - werkzeug -  * Debugger is active!
2025-09-20 11:55:28,502 - INFO - werkzeug -  * Debugger PIN: 102-541-216
2025-09-20 11:55:35,435 - INFO - __main__ - Received request with query: What is the stock price of aapl?, session_id: session_123, user_id: user_456
2025-09-20 11:55:35,436 - INFO - root - -- Before agent call hook executed.
2025-09-20 11:55:35,437 - INFO - root - CallbackContext: ('e-a4f950c2-72bd-4715-925c-f1b42e1aca2c', {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 0}, Content(
  parts=[
    Part(
      text='What is the stock price of aapl?'
    ),
  ],
  role='user'
))
2025-09-20 11:55:35,587 - INFO - root - ------ Before model call hook executed.
2025-09-20 11:55:35,587 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 1}, 
LLM_Request: model='gemini-2.5-flash' contents=[Content(
  parts=[
    Part(
      text='What is the stock price of aapl?'
    ),
  ],
  role='user'
)] config=GenerateContentConfig(
  system_instruction=""" you are a stock analyst who can use other agents to suppliment the analysis by gathering information.
History: 

You are an agent. Your internal name is "root_agent".

 The description about you is "Root agent to coordinate stock analysis"""",
  tools=[
    Tool(
      function_declarations=[
        FunctionDeclaration(
          description='analyse provided ticker symbol',
          name='info_gather_agent',
          parameters=Schema(
            properties={
              <... Max depth ...>: <... Max depth ...>
            },
            required=[
              <... Max depth ...>,
            ],
            type=<Type.OBJECT: 'OBJECT'>
          )
        ),
      ]
    ),
  ]
) live_connect_config=LiveConnectConfig() tools_dict={'info_gather_agent': <google.adk.tools.agent_tool.AgentTool object at 0x000002421E0557F0>}
2025-09-20 11:55:35,600 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\adk\\flows\\llm_flows\\base_llm_flow.py', reloading
2025-09-20 11:55:35,608 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\adk\\agents\\llm_agent.py', reloading
2025-09-20 11:55:36,196 - INFO - google_adk.google.adk.models.google_llm - Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
2025-09-20 11:55:36,196 - INFO - google_genai.models - AFC is enabled with max remote calls: 10.
2025-09-20 11:55:37,175 - INFO - werkzeug -  * Restarting with watchdog (windowsapi)
2025-09-20 11:55:40,862 - WARNING - werkzeug -  * Debugger is active!
2025-09-20 11:55:40,864 - INFO - werkzeug -  * Debugger PIN: 102-541-216
2025-09-20 11:56:25,387 - INFO - __main__ - Received request with query: What is the stock price of aapl?, session_id: session_123, user_id: user_456
2025-09-20 11:56:25,388 - INFO - root - -- Before agent call hook executed.
2025-09-20 11:56:25,388 - INFO - root - CallbackContext: ('e-35b27ed9-c6fc-4502-bd92-b270cbecf8b3', {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 0}, Content(
  parts=[
    Part(
      text='What is the stock price of aapl?'
    ),
  ],
  role='user'
))
2025-09-20 11:56:25,422 - INFO - root - ------ Before model call hook executed.
2025-09-20 11:56:25,423 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 1}, 
LLM_Request: model='gemini-2.5-flash' contents=[Content(
  parts=[
    Part(
      text='What is the stock price of aapl?'
    ),
  ],
  role='user'
)] config=GenerateContentConfig(
  system_instruction=""" you are a stock analyst who can use other agents to suppliment the analysis by gathering information.
History: 

You are an agent. Your internal name is "root_agent".

 The description about you is "Root agent to coordinate stock analysis"""",
  tools=[
    Tool(
      function_declarations=[
        FunctionDeclaration(
          description='analyse provided ticker symbol',
          name='info_gather_agent',
          parameters=Schema(
            properties={
              <... Max depth ...>: <... Max depth ...>
            },
            required=[
              <... Max depth ...>,
            ],
            type=<Type.OBJECT: 'OBJECT'>
          )
        ),
      ]
    ),
  ]
) live_connect_config=LiveConnectConfig() tools_dict={'info_gather_agent': <google.adk.tools.agent_tool.AgentTool object at 0x00000251CE4957F0>}
2025-09-20 11:56:26,016 - INFO - google_adk.google.adk.models.google_llm - Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
2025-09-20 11:56:26,017 - INFO - google_genai.models - AFC is enabled with max remote calls: 10.
2025-09-20 11:56:26,778 - INFO - google_adk.google.adk.models.google_llm - Response received from the model.
2025-09-20 11:56:26,778 - WARNING - google_genai.types - Warning: there are non-text parts in the response: ['thought_signature', 'function_call'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
2025-09-20 11:56:26,779 - INFO - root - ------ After model call hook executed.
2025-09-20 11:56:26,779 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 2}, 
LLM_Response: content=Content(
  parts=[
    Part(
      function_call=FunctionCall(
        args={
          'request': 'stock price of aapl'
        },
        name='info_gather_agent'
      ),
      thought_signature=b"\n\xf5\x01\x01\xd1\xed\x8ao\x1b\xce'\x19t\xe6\x16\x06Y(z\xa68K\x89\xa9\x05\x8a\xa0-b/\xef\xa7#\xe9v'\xba6\xd9b\xf8\x10\x0c\x1cW\x84\xc9Kx\xaf=\xb1\x04\xc7\xb3\xe9\xaa\x199\xf0\xd7\xc1\xe3KT4R8Rs\x0e\xe4)\xf9M\x7f\xd4QR\x10\xf7'\xbd\xd5\x9d\x97\xee\xe1\xd6a\xb7\xbdOq\xc3\x88?...'
    ),
  ],
  role='model'
) grounding_metadata=None partial=None turn_complete=None finish_reason=<FinishReason.STOP: 'STOP'> error_code=None error_message=None interrupted=None custom_metadata=None usage_metadata=GenerateContentResponseUsageMetadata(
  candidates_token_count=21,
  prompt_token_count=101,
  prompt_tokens_details=[
    ModalityTokenCount(
      modality=<MediaModality.TEXT: 'TEXT'>,
      token_count=101
    ),
  ],
  thoughts_token_count=52,
  total_token_count=174
) live_session_resumption_update=None input_transcription=None output_transcription=None
2025-09-20 11:56:26,805 - INFO - root - ---- Before tool call hook executed.
2025-09-20 11:56:26,805 - INFO - root - Tool: info_gather_agent, 
Args: {'request': 'stock price of aapl'}, 
ToolContext: <google.adk.sessions.state.State object at 0x000002519DB270B0>
2025-09-20 11:56:26,823 - INFO - root - -- Before agent call hook executed.
2025-09-20 11:56:26,823 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 4}
2025-09-20 11:56:26,823 - INFO - root - -- Before model call hook executed.
2025-09-20 11:56:26,823 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 4}, 
LLM_Request: model='gemini-2.5-flash' contents=[Content(
  parts=[
    Part(
      text='stock price of aapl'
    ),
  ],
  role='user'
)] config=GenerateContentConfig(
  system_instruction="""you can gather information about stocks using yfinance api, 
you can reflect upon the result and provide comprehensive details using data. Previous agent output: 

You are an agent. Your internal name is "info_gather_agent".

 The description about you is "analyse provided ticker symbol"""",
  tools=[
    Tool(
      function_declarations=[
        FunctionDeclaration(
          description="""
Extract stock information for a given ticker symbol.
ticker - string ticker symbol for the stock
""",
          name='extract_stock_info',
          parameters=Schema(
            properties={
              <... Max depth ...>: <... Max depth ...>
            },
            required=[
              <... Max depth ...>,
            ],
            type=<Type.OBJECT: 'OBJECT'>
          )
        ),
      ]
    ),
  ]
) live_connect_config=LiveConnectConfig() tools_dict={'extract_stock_info': <google.adk.tools.function_tool.FunctionTool object at 0x000002519DB8A3C0>}
2025-09-20 11:56:27,384 - INFO - google_adk.google.adk.models.google_llm - Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
2025-09-20 11:56:27,384 - INFO - google_genai.models - AFC is enabled with max remote calls: 10.
2025-09-20 11:56:28,541 - INFO - google_adk.google.adk.models.google_llm - Response received from the model.
2025-09-20 11:56:28,541 - WARNING - google_genai.types - Warning: there are non-text parts in the response: ['thought_signature', 'function_call'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
2025-09-20 11:56:28,541 - INFO - root - -- After model call hook executed.
2025-09-20 11:56:28,542 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 4}, 
LLM_Response: content=Content(
  parts=[
    Part(
      function_call=FunctionCall(
        args={
          'ticker': 'AAPL'
        },
        name='extract_stock_info'
      ),
      thought_signature=b'\n\xe4\x03\x01\xd1\xed\x8ao)O\x8d\xbaO\x05\x98\x9f\xaf\xec.\xab\xe1j,\xc8F5\x8f\x81O\x93\x1e\r\x95\xa0\xc4L\x1c\x1bFY\xf29\xc8\xa5\xa8\xdf\xdf\xc9\x99\xef"\xd3N\x92eV\x82\x856C\xf9d\x8a\x84Ur\xdf\xd6<\xdb\xa45\nk.\xd8\x8a\x16M\xe1\xf5\x9a\xe49}b\xd4\xe4\x90Y0L\x86Q\xa7\x93\x80...'
    ),
  ],
  role='model'
) grounding_metadata=None partial=None turn_complete=None finish_reason=<FinishReason.STOP: 'STOP'> error_code=None error_message=None interrupted=None custom_metadata=None usage_metadata=GenerateContentResponseUsageMetadata(
  candidates_token_count=17,
  prompt_token_count=122,
  prompt_tokens_details=[
    ModalityTokenCount(
      modality=<MediaModality.TEXT: 'TEXT'>,
      token_count=122
    ),
  ],
  thoughts_token_count=104,
  total_token_count=243
) live_session_resumption_update=None input_transcription=None output_transcription=None
2025-09-20 11:56:28,542 - INFO - root - -- Before tool call hook executed.
2025-09-20 11:56:28,542 - INFO - root - Tool: extract_stock_info, 
Args: {'ticker': 'AAPL'}, 
ToolContext: <google.adk.sessions.state.State object at 0x000002519D8A9040>
2025-09-20 11:56:29,125 - INFO - root - -- After tool call hook executed.
2025-09-20 11:56:29,125 - INFO - root - Tool: extract_stock_info, 
Args: {'ticker': 'AAPL'}, 
ToolContext: <google.adk.sessions.state.State object at 0x000002519D8A9040>, 
Output: {'address1': 'One Apple Park Way', 'city': 'Cupertino', 'state': 'CA', 'zip': '95014', 'country': 'United States', 'phone': '(408) 996-1010', 'website': 'https://www.apple.com', 'industry': 'Consumer Electronics', 'industryKey': 'consumer-electronics', 'industryDisp': 'Consumer Electronics', 'sector': 'Technology', 'sectorKey': 'technology', 'sectorDisp': 'Technology', 'longBusinessSummary': 'Apple Inc. designs, manufactures, and markets smartphones, personal computers, tablets, wearables, and accessories worldwide. The company offers iPhone, a line of smartphones; Mac, a line of personal computers; iPad, a line of multi-purpose tablets; and wearables, home, and accessories comprising AirPods, Apple TV, Apple Watch, Beats products, and HomePod. It also provides AppleCare support and cloud services; and operates various platforms, including the App Store that allow customers to discover and download applications and digital content, such as books, music, video, games, and podcasts, as well as advertising services include third-party licensing arrangements and its own advertising platforms. In addition, the company offers various subscription-based services, such as Apple Arcade, a game subscription service; Apple Fitness+, a personalized fitness service; Apple Music, which offers users a curated listening experience with on-demand radio stations; Apple News+, a subscription news and magazine service; Apple TV+, which offers exclusive original content; Apple Card, a co-branded credit card; and Apple Pay, a cashless payment service, as well as licenses its intellectual property. The company serves consumers, and small and mid-sized businesses; and the education, enterprise, and government markets. It distributes third-party applications for its products through the App Store. The company also sells its products through its retail and online stores, and direct sales force; and third-party cellular network carriers, wholesalers, retailers, and resellers. Apple Inc. was founded in 1976 and is headquartered in Cupertino, California.', 'fullTimeEmployees': 150000, 'companyOfficers': [{'maxAge': 1, 'name': 'Mr. Timothy D. Cook', 'age': 63, 'title': 'CEO & Director', 'yearBorn': 1961, 'fiscalYear': 2024, 'totalPay': 16520856, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Ms. Katherine L. Adams', 'age': 60, 'title': 'Senior VP, General Counsel & Secretary', 'yearBorn': 1964, 'fiscalYear': 2024, 'totalPay': 5022182, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': "Ms. Deirdre  O'Brien", 'age': 57, 'title': 'Chief People Officer & Senior VP of Retail', 'yearBorn': 1967, 'fiscalYear': 2024, 'totalPay': 5022182, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Mr. Jeffrey E. Williams', 'age': 60, 'title': 'Senior Vice President of Design, Watch, & Health', 'yearBorn': 1964, 'fiscalYear': 2024, 'totalPay': 5020737, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Mr. Kevan  Parekh', 'age': 52, 'title': 'Senior VP & CFO', 'yearBorn': 1972, 'fiscalYear': 2024, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Mr. Sabih  Khan', 'title': 'Chief Operating Officer', 'fiscalYear': 2024, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Mr. Chris  Kondo', 'title': 'Senior Director of Corporate Accounting', 'fiscalYear': 2024, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Suhasini  Chandramouli', 'title': 'Director of Investor Relations', 'fiscalYear': 2024, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Ms. Kristin Huguet Quayle', 'title': 'Vice President of Worldwide Communications', 'fiscalYear': 2024, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Mr. Greg  Joswiak', 'title': 'Senior Vice President of Worldwide Marketing', 'fiscalYear': 2024, 'exercisedValue': 0, 'unexercisedValue': 0}], 'auditRisk': 7, 'boardRisk': 1, 'compensationRisk': 3, 'shareHolderRightsRisk': 1, 'overallRisk': 1, 'governanceEpochDate': 1756684800, 'compensationAsOfEpochDate': 1735603200, 'irWebsite': 'http://investor.apple.com/', 'executiveTeam': [], 'maxAge': 86400, 'priceHint': 2, 'previousClose': 237.88, 'open': 241.175, 'dayLow': 240.2106, 'dayHigh': 246.27, 'regularMarketPreviousClose': 237.88, 'regularMarketOpen': 241.175, 'regularMarketDayLow': 240.2106, 'regularMarketDayHigh': 246.3, 'dividendRate': 1.04, 'dividendYield': 0.42, 'exDividendDate': 1754870400, 'payoutRatio': 0.1533, 'fiveYearAvgDividendYield': 0.54, 'beta': 1.109, 'trailingPE': 37.31003, 'forwardPE': 29.542719, 'volume': 162456387, 'regularMarketVolume': 162456387, 'averageVolume': 56212347, 'averageVolume10days': 66513550, 'averageDailyVolume10Day': 66513550, 'bid': 240.0, 'ask': 258.21, 'bidSize': 1, 'askSize': 1, 'marketCap': 3643315585024, 'fiftyTwoWeekLow': 169.21, 'fiftyTwoWeekHigh': 260.1, 'priceToSalesTrailing12Months': 8.916038, 'fiftyDayAverage': 223.929, 'twoHundredDayAverage': 221.6535, 'trailingAnnualDividendRate': 1.01, 'trailingAnnualDividendYield': 0.004245838, 'currency': 'USD', 'tradeable': False, 'enterpriseValue': 3689641672704, 'profitMargins': 0.24295999, 'floatShares': 14814419318, 'sharesOutstanding': 14840390000, 'sharesShort': 113582365, 'sharesShortPriorMonth': 104634941, 'sharesShortPreviousMonthDate': 1753920000, 'dateShortInterest': 1756425600, 'sharesPercentSharesOut': 0.0077, 'heldPercentInsiders': 0.0197, 'heldPercentInstitutions': 0.63643, 'shortRatio': 1.95, 'shortPercentOfFloat': 0.0077, 'impliedSharesOutstanding': 15318899712, 'bookValue': 4.431, 'priceToBook': 55.405098, 'lastFiscalYearEnd': 1727481600, 'nextFiscalYearEnd': 1759017600, 'mostRecentQuarter': 1751068800, 'earningsQuarterlyGrowth': 0.093, 'netIncomeToCommon': 99280003072, 'trailingEps': 6.58, 'forwardEps': 8.31, 'lastSplitFactor': '4:1', 'lastSplitDate': 1598832000, 'enterpriseToRevenue': 9.029, 'enterpriseToEbitda': 26.039, '52WeekChange': 0.08402884, 'SandP52WeekChange': 0.1653893, 'lastDividendValue': 0.26, 'lastDividendDate': 1754870400, 'quoteType': 'EQUITY', 'currentPrice': 245.5, 'targetHighPrice': 300.0, 'targetLowPrice': 175.0, 'targetMeanPrice': 241.31557, 'targetMedianPrice': 243.0, 'recommendationMean': 2.02128, 'recommendationKey': 'buy', 'numberOfAnalystOpinions': 40, 'totalCash': 55372001280, 'totalCashPerShare': 3.731, 'ebitda': 141696008192, 'totalDebt': 101698002944, 'quickRatio': 0.724, 'currentRatio': 0.868, 'totalRevenue': 408624988160, 'debtToEquity': 154.486, 'revenuePerShare': 27.173, 'returnOnAssets': 0.24545999, 'returnOnEquity': 1.49814, 'grossProfits': 190739005440, 'freeCashflow': 94873747456, 'operatingCashflow': 108564996096, 'earningsGrowth': 0.121, 'revenueGrowth': 0.096, 'grossMargins': 0.46678, 'ebitdaMargins': 0.34675997, 'operatingMargins': 0.29990998, 'financialCurrency': 'USD', 'symbol': 'AAPL', 'language': 'en-US', 'region': 'US', 'typeDisp': 'Equity', 'quoteSourceName': 'Delayed Quote', 'triggerable': True, 'customPriceAlertConfidence': 'HIGH', 'dividendDate': 1755129600, 'earningsTimestamp': 1753992000, 'earningsTimestampStart': 1761854400, 'earningsTimestampEnd': 1761854400, 'earningsCallTimestampStart': 1753995600, 'earningsCallTimestampEnd': 1753995600, 'isEarningsDateEstimate': True, 'epsTrailingTwelveMonths': 6.58, 'epsForward': 8.31, 'epsCurrentYear': 7.38448, 'priceEpsCurrentYear': 33.2454, 'fiftyDayAverageChange': 21.571, 'fiftyDayAverageChangePercent': 0.09632964, 'twoHundredDayAverageChange': 23.846497, 'twoHundredDayAverageChangePercent': 0.107584566, 'sourceInterval': 15, 'exchangeDataDelayedBy': 0, 'averageAnalystRating': '2.0 - Buy', 'shortName': 'Apple Inc.', 'longName': 'Apple Inc.', 'regularMarketChangePercent': 3.20329, 'regularMarketPrice': 245.5, 'corporateActions': [], 'postMarketTime': 1758326399, 'regularMarketTime': 1758312002, 'exchange': 'NMS', 'messageBoardId': 'finmb_24937', 'exchangeTimezoneName': 'America/New_York', 'exchangeTimezoneShortName': 'EDT', 'gmtOffSetMilliseconds': -14400000, 'market': 'us_market', 'esgPopulated': False, 'postMarketChangePercent': 0.07739407, 'postMarketPrice': 245.69, 'postMarketChange': 0.19000244, 'regularMarketChange': 7.62, 'regularMarketDayRange': '240.2106 - 246.3', 'fullExchangeName': 'NasdaqGS', 'averageDailyVolume3Month': 56212347, 'fiftyTwoWeekLowChange': 76.28999, 'fiftyTwoWeekLowChangePercent': 0.4508598, 'fiftyTwoWeekRange': '169.21 - 260.1', 'fiftyTwoWeekHighChange': -14.600006, 'fiftyTwoWeekHighChangePercent': -0.05613228, 'fiftyTwoWeekChangePercent': 8.402884, 'cryptoTradeable': False, 'hasPrePostMarketData': True, 'firstTradeDateMilliseconds': 345479400000, 'marketState': 'CLOSED', 'displayName': 'Apple', 'trailingPegRatio': 2.3591}
2025-09-20 11:56:29,127 - INFO - root - -- Before model call hook executed.
2025-09-20 11:56:29,127 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 4}, 
LLM_Request: model='gemini-2.5-flash' contents=[Content(
  parts=[
    Part(
      text='stock price of aapl'
    ),
  ],
  role='user'
), Content(
  parts=[
    Part(
      function_call=FunctionCall(
        args={
          'ticker': 'AAPL'
        },
        name='extract_stock_info'
      ),
      thought_signature=b'\n\xe4\x03\x01\xd1\xed\x8ao)O\x8d\xbaO\x05\x98\x9f\xaf\xec.\xab\xe1j,\xc8F5\x8f\x81O\x93\x1e\r\x95\xa0\xc4L\x1c\x1bFY\xf29\xc8\xa5\xa8\xdf\xdf\xc9\x99\xef"\xd3N\x92eV\x82\x856C\xf9d\x8a\x84Ur\xdf\xd6<\xdb\xa45\nk.\xd8\x8a\x16M\xe1\xf5\x9a\xe49}b\xd4\xe4\x90Y0L\x86Q\xa7\x93\x80...'
    ),
  ],
  role='model'
), Content(
  parts=[
    Part(
      function_response=FunctionResponse(
        name='extract_stock_info',
        response=<dict len=180>
      )
    ),
  ],
  role='user'
)] config=GenerateContentConfig(
  system_instruction="""you can gather information about stocks using yfinance api, 
you can reflect upon the result and provide comprehensive details using data. Previous agent output: 

You are an agent. Your internal name is "info_gather_agent".

 The description about you is "analyse provided ticker symbol"""",
  tools=[
    Tool(
      function_declarations=[
        FunctionDeclaration(
          description="""
Extract stock information for a given ticker symbol.
ticker - string ticker symbol for the stock
""",
          name='extract_stock_info',
          parameters=Schema(
            properties={
              <... Max depth ...>: <... Max depth ...>
            },
            required=[
              <... Max depth ...>,
            ],
            type=<Type.OBJECT: 'OBJECT'>
          )
        ),
      ]
    ),
  ]
) live_connect_config=LiveConnectConfig() tools_dict={'extract_stock_info': <google.adk.tools.function_tool.FunctionTool object at 0x000002519D8C1950>}
2025-09-20 11:56:29,688 - INFO - google_adk.google.adk.models.google_llm - Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
2025-09-20 11:56:29,688 - INFO - google_genai.models - AFC is enabled with max remote calls: 10.
2025-09-20 11:56:31,518 - INFO - google_adk.google.adk.models.google_llm - Response received from the model.
2025-09-20 11:56:31,518 - WARNING - google_genai.types - Warning: there are non-text parts in the response: ['thought_signature'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
2025-09-20 11:56:31,518 - INFO - root - -- After model call hook executed.
2025-09-20 11:56:31,519 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 4}, 
LLM_Response: content=Content(
  parts=[
    Part(
      text="""The current stock price of Apple Inc. (AAPL) is $245.5.

Here are some additional details:
*   **Day's High:** $246.3
*   **Day's Low:** $240.21
*   **Previous Close:** $237.88
*   **Open:** $241.175
*   **52 Week High:** $260.1
*   **52 Week Low:** $169.21""",
      thought_signature=b'\n\xce\x03\x01\xd1\xed\x8aoe\x01\x90\x81\x92\x91U\xbeysk{\xde\xbcR\xc5zW\xb0E_\xeb\x9d\xddW\xfc\xed\xba.\x12\x10\xac\xf1\xa2{\xbb(b\x18\xc0\x8c\xcb\xack\xe0\x92\xa6\xef?\xf5\xef\xf6\x82\x82\x9e\xec\x04|\x05\x85\x94\xe1\xf0W\\\xcc\x87\x88\xe6\xe1Y\xe1\xb8\x80j\x1a3\x05\xbd\xa4Tgy\x11\xcaMw>\x0b...'
    ),
  ],
  role='model'
) grounding_metadata=None partial=None turn_complete=None finish_reason=<FinishReason.STOP: 'STOP'> error_code=None error_message=None interrupted=None custom_metadata=None usage_metadata=GenerateContentResponseUsageMetadata(
  candidates_token_count=116,
  prompt_token_count=3502,
  prompt_tokens_details=[
    ModalityTokenCount(
      modality=<MediaModality.TEXT: 'TEXT'>,
      token_count=3502
    ),
  ],
  thoughts_token_count=108,
  total_token_count=3726
) live_session_resumption_update=None input_transcription=None output_transcription=None
2025-09-20 11:56:31,520 - INFO - root - -- After agent call hook executed.
2025-09-20 11:56:31,520 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 4, 'result': "The current stock price of Apple Inc. (AAPL) is $245.5.\n\nHere are some additional details:\n*   **Day's High:** $246.3\n*   **Day's Low:** $240.21\n*   **Previous Close:** $237.88\n*   **Open:** $241.175\n*   **52 Week High:** $260.1\n*   **52 Week Low:** $169.21"}
2025-09-20 11:56:31,520 - INFO - root - ---- After tool call hook executed.
2025-09-20 11:56:31,520 - INFO - root - Tool: info_gather_agent, 
Args: {'request': 'stock price of aapl'}, 
ToolContext: <google.adk.sessions.state.State object at 0x000002519DB270B0>, 
Output: The current stock price of Apple Inc. (AAPL) is $245.5.

Here are some additional details:
*   **Day's High:** $246.3
*   **Day's Low:** $240.21
*   **Previous Close:** $237.88
*   **Open:** $241.175
*   **52 Week High:** $260.1
*   **52 Week Low:** $169.21
2025-09-20 11:56:31,549 - INFO - root - ------ Before model call hook executed.
2025-09-20 11:56:31,549 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 5, 'result': "The current stock price of Apple Inc. (AAPL) is $245.5.\n\nHere are some additional details:\n*   **Day's High:** $246.3\n*   **Day's Low:** $240.21\n*   **Previous Close:** $237.88\n*   **Open:** $241.175\n*   **52 Week High:** $260.1\n*   **52 Week Low:** $169.21"}, 
LLM_Request: model='gemini-2.5-flash' contents=[Content(
  parts=[
    Part(
      text='What is the stock price of aapl?'
    ),
  ],
  role='user'
), Content(
  parts=[
    Part(
      function_call=FunctionCall(
        args={
          'request': 'stock price of aapl'
        },
        name='info_gather_agent'
      ),
      thought_signature=b"\n\xf5\x01\x01\xd1\xed\x8ao\x1b\xce'\x19t\xe6\x16\x06Y(z\xa68K\x89\xa9\x05\x8a\xa0-b/\xef\xa7#\xe9v'\xba6\xd9b\xf8\x10\x0c\x1cW\x84\xc9Kx\xaf=\xb1\x04\xc7\xb3\xe9\xaa\x199\xf0\xd7\xc1\xe3KT4R8Rs\x0e\xe4)\xf9M\x7f\xd4QR\x10\xf7'\xbd\xd5\x9d\x97\xee\xe1\xd6a\xb7\xbdOq\xc3\x88?...'
    ),
  ],
  role='model'
), Content(
  parts=[
    Part(
      function_response=FunctionResponse(
        name='info_gather_agent',
        response={
          'result': """The current stock price of Apple Inc. (AAPL) is $245.5.

Here are some additional details:
*   **Day's High:** $246.3
*   **Day's Low:** $240.21
*   **Previous Close:** $237.88
*   **Open:** $241.175
*   **52 Week High:** $260.1
*   **52 Week Low:** $169.21"""
        }
      )
    ),
  ],
  role='user'
)] config=GenerateContentConfig(
  system_instruction=""" you are a stock analyst who can use other agents to suppliment the analysis by gathering information.
History: 

You are an agent. Your internal name is "root_agent".

 The description about you is "Root agent to coordinate stock analysis"""",
  tools=[
    Tool(
      function_declarations=[
        FunctionDeclaration(
          description='analyse provided ticker symbol',
          name='info_gather_agent',
          parameters=Schema(
            properties={
              <... Max depth ...>: <... Max depth ...>
            },
            required=[
              <... Max depth ...>,
            ],
            type=<Type.OBJECT: 'OBJECT'>
          )
        ),
      ]
    ),
  ]
) live_connect_config=LiveConnectConfig() tools_dict={'info_gather_agent': <google.adk.tools.agent_tool.AgentTool object at 0x00000251CE4957F0>}
2025-09-20 11:56:32,126 - INFO - google_adk.google.adk.models.google_llm - Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
2025-09-20 11:56:32,126 - INFO - google_genai.models - AFC is enabled with max remote calls: 10.
2025-09-20 11:56:32,924 - INFO - google_adk.google.adk.models.google_llm - Response received from the model.
2025-09-20 11:56:32,924 - INFO - root - ------ After model call hook executed.
2025-09-20 11:56:32,925 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 6, 'result': "The current stock price of Apple Inc. (AAPL) is $245.5.\n\nHere are some additional details:\n*   **Day's High:** $246.3\n*   **Day's Low:** $240.21\n*   **Previous Close:** $237.88\n*   **Open:** $241.175\n*   **52 Week High:** $260.1\n*   **52 Week Low:** $169.21"}, 
LLM_Response: content=Content(
  parts=[
    Part(
      text="""The current stock price of Apple Inc. (AAPL) is $245.5.

Here are some additional details:
*   **Day's High:** $246.3
*   **Day's Low:** $240.21
*   **Previous Close:** $237.88
*   **Open:** $241.175
*   **52 Week High:** $260.1
*   **52 Week Low:** $169.21"""
    ),
  ],
  role='model'
) grounding_metadata=None partial=None turn_complete=None finish_reason=<FinishReason.STOP: 'STOP'> error_code=None error_message=None interrupted=None custom_metadata=None usage_metadata=GenerateContentResponseUsageMetadata(
  candidates_token_count=116,
  prompt_token_count=261,
  prompt_tokens_details=[
    ModalityTokenCount(
      modality=<MediaModality.TEXT: 'TEXT'>,
      token_count=261
    ),
  ],
  total_token_count=377
) live_session_resumption_update=None input_transcription=None output_transcription=None
2025-09-20 11:56:32,950 - INFO - root - -- After agent call hook executed.
2025-09-20 11:56:32,950 - INFO - root - CallbackContext: ('e-35b27ed9-c6fc-4502-bd92-b270cbecf8b3', {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 7, 'result': "The current stock price of Apple Inc. (AAPL) is $245.5.\n\nHere are some additional details:\n*   **Day's High:** $246.3\n*   **Day's Low:** $240.21\n*   **Previous Close:** $237.88\n*   **Open:** $241.175\n*   **52 Week High:** $260.1\n*   **52 Week Low:** $169.21"}, Content(
  parts=[
    Part(
      text='What is the stock price of aapl?'
    ),
  ],
  role='user'
))
2025-09-20 11:56:32,980 - INFO - werkzeug - 127.0.0.1 - - [20/Sep/2025 11:56:32] "POST /agent_endpoint HTTP/1.1" 200 -
2025-09-20 11:57:14,000 - INFO - werkzeug -  * Detected change in 'C:\\py_code\\agent\\agents\\memory.py', reloading
2025-09-20 11:57:14,000 - INFO - werkzeug -  * Detected change in 'C:\\py_code\\agent\\agents\\memory.py', reloading
2025-09-20 11:57:14,805 - INFO - werkzeug -  * Restarting with watchdog (windowsapi)
2025-09-20 11:57:19,081 - WARNING - werkzeug -  * Debugger is active!
2025-09-20 11:57:19,083 - INFO - werkzeug -  * Debugger PIN: 102-541-216
2025-09-20 11:57:21,975 - INFO - werkzeug -  * Detected change in 'C:\\py_code\\agent\\agents\\memory.py', reloading
2025-09-20 11:57:21,975 - INFO - werkzeug -  * Detected change in 'C:\\py_code\\agent\\agents\\memory.py', reloading
2025-09-20 11:57:22,699 - INFO - werkzeug -  * Restarting with watchdog (windowsapi)
2025-09-20 11:59:02,971 - INFO - werkzeug - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-09-20 11:59:02,971 - INFO - werkzeug - [33mPress CTRL+C to quit[0m
2025-09-20 11:59:02,980 - INFO - werkzeug -  * Restarting with watchdog (windowsapi)
2025-09-20 11:59:06,926 - WARNING - werkzeug -  * Debugger is active!
2025-09-20 11:59:06,928 - INFO - werkzeug -  * Debugger PIN: 102-541-216
2025-09-20 11:59:16,155 - INFO - __main__ - Received request with query: What is the stock price of aapl?, session_id: session_123, user_id: user_456
2025-09-20 11:59:16,157 - INFO - root - -- Before agent call hook executed.
2025-09-20 11:59:16,157 - INFO - root - CallbackContext: ('e-ad6b0e9b-ceaa-49ff-97af-68c476d7beac', {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 0}, Content(
  parts=[
    Part(
      text='What is the stock price of aapl?'
    ),
  ],
  role='user'
))
2025-09-20 11:59:16,209 - INFO - root - ------ Before model call hook executed.
2025-09-20 11:59:16,210 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 1}, 
LLM_Request: model='gemini-2.5-flash' contents=[Content(
  parts=[
    Part(
      text='What is the stock price of aapl?'
    ),
  ],
  role='user'
)] config=GenerateContentConfig(
  system_instruction=""" you are a stock analyst who can use other agents to suppliment the analysis by gathering information.
History: 

You are an agent. Your internal name is "root_agent".

 The description about you is "Root agent to coordinate stock analysis"""",
  tools=[
    Tool(
      function_declarations=[
        FunctionDeclaration(
          description='analyse provided ticker symbol',
          name='info_gather_agent',
          parameters=Schema(
            properties={
              <... Max depth ...>: <... Max depth ...>
            },
            required=[
              <... Max depth ...>,
            ],
            type=<Type.OBJECT: 'OBJECT'>
          )
        ),
      ]
    ),
  ]
) live_connect_config=LiveConnectConfig() tools_dict={'info_gather_agent': <google.adk.tools.agent_tool.AgentTool object at 0x000001F67ADF57F0>}
2025-09-20 11:59:16,798 - INFO - google_adk.google.adk.models.google_llm - Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
2025-09-20 11:59:16,798 - INFO - google_genai.models - AFC is enabled with max remote calls: 10.
2025-09-20 11:59:17,671 - INFO - google_adk.google.adk.models.google_llm - Response received from the model.
2025-09-20 11:59:17,671 - WARNING - google_genai.types - Warning: there are non-text parts in the response: ['thought_signature', 'function_call'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
2025-09-20 11:59:17,671 - INFO - root - ------ After model call hook executed.
2025-09-20 11:59:17,671 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 2}, 
LLM_Response: content=Content(
  parts=[
    Part(
      function_call=FunctionCall(
        args={
          'request': 'stock price of aapl'
        },
        name='info_gather_agent'
      ),
      thought_signature=b"\n\x87\x02\x01\xd1\xed\x8ao9OqI\xc5\x9fUS\xd5B\xb0\xc3\xbbq\x02\xdc\\\xc7'\xd4\x05 YX\xa7\xd7\xdbK2\x1b\x8e\xc3\xd19\xa1G\xaf\x03\x1fv\x88\xf4\x14(\x90\xee\xd7\xa1`H\x11\xb2F\xf0\x9cI/\xfe\xc2M}mlN\x95\x1f\x12\xc8\x94q\x1e\xfd\xbd#4\x9d\xe1\x0e\x10\x82\xfbm\xdeiza\x98M\xf7...'
    ),
  ],
  role='model'
) grounding_metadata=None partial=None turn_complete=None finish_reason=<FinishReason.STOP: 'STOP'> error_code=None error_message=None interrupted=None custom_metadata=None usage_metadata=GenerateContentResponseUsageMetadata(
  candidates_token_count=21,
  prompt_token_count=101,
  prompt_tokens_details=[
    ModalityTokenCount(
      modality=<MediaModality.TEXT: 'TEXT'>,
      token_count=101
    ),
  ],
  thoughts_token_count=58,
  total_token_count=180
) live_session_resumption_update=None input_transcription=None output_transcription=None
2025-09-20 11:59:17,694 - INFO - root - ---- Before tool call hook executed.
2025-09-20 11:59:17,694 - INFO - root - Tool: info_gather_agent, 
Args: {'request': 'stock price of aapl'}, 
ToolContext: <google.adk.sessions.state.State object at 0x000001F64A2272F0>
2025-09-20 11:59:17,708 - INFO - root - -- Before agent call hook executed.
2025-09-20 11:59:17,708 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 4}
2025-09-20 11:59:17,709 - INFO - root - -- Before model call hook executed.
2025-09-20 11:59:17,709 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 4}, 
LLM_Request: model='gemini-2.5-flash' contents=[Content(
  parts=[
    Part(
      text='stock price of aapl'
    ),
  ],
  role='user'
)] config=GenerateContentConfig(
  system_instruction="""you can gather information about stocks using yfinance api, 
you can reflect upon the result and provide comprehensive details using data. Previous agent output: 

You are an agent. Your internal name is "info_gather_agent".

 The description about you is "analyse provided ticker symbol"""",
  tools=[
    Tool(
      function_declarations=[
        FunctionDeclaration(
          description="""
Extract stock information for a given ticker symbol.
ticker - string ticker symbol for the stock
""",
          name='extract_stock_info',
          parameters=Schema(
            properties={
              <... Max depth ...>: <... Max depth ...>
            },
            required=[
              <... Max depth ...>,
            ],
            type=<Type.OBJECT: 'OBJECT'>
          )
        ),
      ]
    ),
  ]
) live_connect_config=LiveConnectConfig() tools_dict={'extract_stock_info': <google.adk.tools.function_tool.FunctionTool object at 0x000001F64A4CA3C0>}
2025-09-20 11:59:18,286 - INFO - google_adk.google.adk.models.google_llm - Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
2025-09-20 11:59:18,287 - INFO - google_genai.models - AFC is enabled with max remote calls: 10.
2025-09-20 11:59:19,060 - INFO - google_adk.google.adk.models.google_llm - Response received from the model.
2025-09-20 11:59:19,060 - WARNING - google_genai.types - Warning: there are non-text parts in the response: ['thought_signature', 'function_call'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
2025-09-20 11:59:19,061 - INFO - root - -- After model call hook executed.
2025-09-20 11:59:19,061 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 4}, 
LLM_Response: content=Content(
  parts=[
    Part(
      function_call=FunctionCall(
        args={
          'ticker': 'aapl'
        },
        name='extract_stock_info'
      ),
      thought_signature=b'\n\xff\x01\x01\xd1\xed\x8ao\xe9\x889;\xa7\xd2\x0f\xd5\x9d\x023\xcaB\xac\xbcxB\x15\xc8\x10\xb0\xb2\xb7\xb5\xbc\x0eY\xe9\x8df\xa7(\xfb\x9a\xad\xe9x\x9cZ\xd9M\xf8O2\xd8\xe6x|\xc7l\xa0\x04\xfa;\xbbok\x7f\xa8|J\x1ec\xfci\xbd\xfe\xc3i\xac\x0b\x83zp\xf1\xdc\xaf\xc5\xa5\xa8\xd8ZF_\xae\x84k\x84\xdd...'
    ),
  ],
  role='model'
) grounding_metadata=None partial=None turn_complete=None finish_reason=<FinishReason.STOP: 'STOP'> error_code=None error_message=None interrupted=None custom_metadata=None usage_metadata=GenerateContentResponseUsageMetadata(
  candidates_token_count=18,
  prompt_token_count=122,
  prompt_tokens_details=[
    ModalityTokenCount(
      modality=<MediaModality.TEXT: 'TEXT'>,
      token_count=122
    ),
  ],
  thoughts_token_count=59,
  total_token_count=199
) live_session_resumption_update=None input_transcription=None output_transcription=None
2025-09-20 11:59:19,061 - INFO - root - -- Before tool call hook executed.
2025-09-20 11:59:19,061 - INFO - root - Tool: extract_stock_info, 
Args: {'ticker': 'aapl'}, 
ToolContext: <google.adk.sessions.state.State object at 0x000001F67AE332F0>
2025-09-20 11:59:19,668 - INFO - root - -- After tool call hook executed.
2025-09-20 11:59:19,668 - INFO - root - Tool: extract_stock_info, 
Args: {'ticker': 'aapl'}, 
ToolContext: <google.adk.sessions.state.State object at 0x000001F67AE332F0>, 
Output: {'address1': 'One Apple Park Way', 'city': 'Cupertino', 'state': 'CA', 'zip': '95014', 'country': 'United States', 'phone': '(408) 996-1010', 'website': 'https://www.apple.com', 'industry': 'Consumer Electronics', 'industryKey': 'consumer-electronics', 'industryDisp': 'Consumer Electronics', 'sector': 'Technology', 'sectorKey': 'technology', 'sectorDisp': 'Technology', 'longBusinessSummary': 'Apple Inc. designs, manufactures, and markets smartphones, personal computers, tablets, wearables, and accessories worldwide. The company offers iPhone, a line of smartphones; Mac, a line of personal computers; iPad, a line of multi-purpose tablets; and wearables, home, and accessories comprising AirPods, Apple TV, Apple Watch, Beats products, and HomePod. It also provides AppleCare support and cloud services; and operates various platforms, including the App Store that allow customers to discover and download applications and digital content, such as books, music, video, games, and podcasts, as well as advertising services include third-party licensing arrangements and its own advertising platforms. In addition, the company offers various subscription-based services, such as Apple Arcade, a game subscription service; Apple Fitness+, a personalized fitness service; Apple Music, which offers users a curated listening experience with on-demand radio stations; Apple News+, a subscription news and magazine service; Apple TV+, which offers exclusive original content; Apple Card, a co-branded credit card; and Apple Pay, a cashless payment service, as well as licenses its intellectual property. The company serves consumers, and small and mid-sized businesses; and the education, enterprise, and government markets. It distributes third-party applications for its products through the App Store. The company also sells its products through its retail and online stores, and direct sales force; and third-party cellular network carriers, wholesalers, retailers, and resellers. Apple Inc. was founded in 1976 and is headquartered in Cupertino, California.', 'fullTimeEmployees': 150000, 'companyOfficers': [{'maxAge': 1, 'name': 'Mr. Timothy D. Cook', 'age': 63, 'title': 'CEO & Director', 'yearBorn': 1961, 'fiscalYear': 2024, 'totalPay': 16520856, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Ms. Katherine L. Adams', 'age': 60, 'title': 'Senior VP, General Counsel & Secretary', 'yearBorn': 1964, 'fiscalYear': 2024, 'totalPay': 5022182, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': "Ms. Deirdre  O'Brien", 'age': 57, 'title': 'Chief People Officer & Senior VP of Retail', 'yearBorn': 1967, 'fiscalYear': 2024, 'totalPay': 5022182, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Mr. Jeffrey E. Williams', 'age': 60, 'title': 'Senior Vice President of Design, Watch, & Health', 'yearBorn': 1964, 'fiscalYear': 2024, 'totalPay': 5020737, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Mr. Kevan  Parekh', 'age': 52, 'title': 'Senior VP & CFO', 'yearBorn': 1972, 'fiscalYear': 2024, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Mr. Sabih  Khan', 'title': 'Chief Operating Officer', 'fiscalYear': 2024, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Mr. Chris  Kondo', 'title': 'Senior Director of Corporate Accounting', 'fiscalYear': 2024, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Suhasini  Chandramouli', 'title': 'Director of Investor Relations', 'fiscalYear': 2024, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Ms. Kristin Huguet Quayle', 'title': 'Vice President of Worldwide Communications', 'fiscalYear': 2024, 'exercisedValue': 0, 'unexercisedValue': 0}, {'maxAge': 1, 'name': 'Mr. Greg  Joswiak', 'title': 'Senior Vice President of Worldwide Marketing', 'fiscalYear': 2024, 'exercisedValue': 0, 'unexercisedValue': 0}], 'auditRisk': 7, 'boardRisk': 1, 'compensationRisk': 3, 'shareHolderRightsRisk': 1, 'overallRisk': 1, 'governanceEpochDate': 1756684800, 'compensationAsOfEpochDate': 1735603200, 'irWebsite': 'http://investor.apple.com/', 'executiveTeam': [], 'maxAge': 86400, 'priceHint': 2, 'previousClose': 237.88, 'open': 241.175, 'dayLow': 240.2106, 'dayHigh': 246.27, 'regularMarketPreviousClose': 237.88, 'regularMarketOpen': 241.175, 'regularMarketDayLow': 240.2106, 'regularMarketDayHigh': 246.3, 'dividendRate': 1.04, 'dividendYield': 0.42, 'exDividendDate': 1754870400, 'payoutRatio': 0.1533, 'fiveYearAvgDividendYield': 0.54, 'beta': 1.109, 'trailingPE': 37.31003, 'forwardPE': 29.542719, 'volume': 162456387, 'regularMarketVolume': 162456387, 'averageVolume': 56212347, 'averageVolume10days': 66513550, 'averageDailyVolume10Day': 66513550, 'bid': 240.0, 'ask': 258.21, 'bidSize': 1, 'askSize': 1, 'marketCap': 3643315585024, 'fiftyTwoWeekLow': 169.21, 'fiftyTwoWeekHigh': 260.1, 'priceToSalesTrailing12Months': 8.916038, 'fiftyDayAverage': 223.929, 'twoHundredDayAverage': 221.6535, 'trailingAnnualDividendRate': 1.01, 'trailingAnnualDividendYield': 0.004245838, 'currency': 'USD', 'tradeable': False, 'enterpriseValue': 3689641672704, 'profitMargins': 0.24295999, 'floatShares': 14814419318, 'sharesOutstanding': 14840390000, 'sharesShort': 113582365, 'sharesShortPriorMonth': 104634941, 'sharesShortPreviousMonthDate': 1753920000, 'dateShortInterest': 1756425600, 'sharesPercentSharesOut': 0.0077, 'heldPercentInsiders': 0.0197, 'heldPercentInstitutions': 0.63643, 'shortRatio': 1.95, 'shortPercentOfFloat': 0.0077, 'impliedSharesOutstanding': 15318899712, 'bookValue': 4.431, 'priceToBook': 55.405098, 'lastFiscalYearEnd': 1727481600, 'nextFiscalYearEnd': 1759017600, 'mostRecentQuarter': 1751068800, 'earningsQuarterlyGrowth': 0.093, 'netIncomeToCommon': 99280003072, 'trailingEps': 6.58, 'forwardEps': 8.31, 'lastSplitFactor': '4:1', 'lastSplitDate': 1598832000, 'enterpriseToRevenue': 9.029, 'enterpriseToEbitda': 26.039, '52WeekChange': 0.08402884, 'SandP52WeekChange': 0.1653893, 'lastDividendValue': 0.26, 'lastDividendDate': 1754870400, 'quoteType': 'EQUITY', 'currentPrice': 245.5, 'targetHighPrice': 300.0, 'targetLowPrice': 175.0, 'targetMeanPrice': 241.31557, 'targetMedianPrice': 243.0, 'recommendationMean': 2.02128, 'recommendationKey': 'buy', 'numberOfAnalystOpinions': 40, 'totalCash': 55372001280, 'totalCashPerShare': 3.731, 'ebitda': 141696008192, 'totalDebt': 101698002944, 'quickRatio': 0.724, 'currentRatio': 0.868, 'totalRevenue': 408624988160, 'debtToEquity': 154.486, 'revenuePerShare': 27.173, 'returnOnAssets': 0.24545999, 'returnOnEquity': 1.49814, 'grossProfits': 190739005440, 'freeCashflow': 94873747456, 'operatingCashflow': 108564996096, 'earningsGrowth': 0.121, 'revenueGrowth': 0.096, 'grossMargins': 0.46678, 'ebitdaMargins': 0.34675997, 'operatingMargins': 0.29990998, 'financialCurrency': 'USD', 'symbol': 'AAPL', 'language': 'en-US', 'region': 'US', 'typeDisp': 'Equity', 'quoteSourceName': 'Delayed Quote', 'triggerable': True, 'customPriceAlertConfidence': 'HIGH', 'dividendDate': 1755129600, 'earningsTimestamp': 1753992000, 'earningsTimestampStart': 1761854400, 'earningsTimestampEnd': 1761854400, 'earningsCallTimestampStart': 1753995600, 'earningsCallTimestampEnd': 1753995600, 'isEarningsDateEstimate': True, 'epsTrailingTwelveMonths': 6.58, 'epsForward': 8.31, 'epsCurrentYear': 7.38448, 'priceEpsCurrentYear': 33.2454, 'fiftyDayAverageChange': 21.571, 'fiftyDayAverageChangePercent': 0.09632964, 'twoHundredDayAverageChange': 23.846497, 'twoHundredDayAverageChangePercent': 0.107584566, 'sourceInterval': 15, 'exchangeDataDelayedBy': 0, 'averageAnalystRating': '2.0 - Buy', 'shortName': 'Apple Inc.', 'longName': 'Apple Inc.', 'regularMarketChangePercent': 3.20329, 'regularMarketPrice': 245.5, 'corporateActions': [], 'postMarketTime': 1758326399, 'regularMarketTime': 1758312002, 'exchange': 'NMS', 'messageBoardId': 'finmb_24937', 'exchangeTimezoneName': 'America/New_York', 'exchangeTimezoneShortName': 'EDT', 'gmtOffSetMilliseconds': -14400000, 'market': 'us_market', 'esgPopulated': False, 'postMarketChangePercent': 0.07739407, 'postMarketPrice': 245.69, 'postMarketChange': 0.19000244, 'regularMarketChange': 7.62, 'regularMarketDayRange': '240.2106 - 246.3', 'fullExchangeName': 'NasdaqGS', 'averageDailyVolume3Month': 56212347, 'fiftyTwoWeekLowChange': 76.28999, 'fiftyTwoWeekLowChangePercent': 0.4508598, 'fiftyTwoWeekRange': '169.21 - 260.1', 'fiftyTwoWeekHighChange': -14.600006, 'fiftyTwoWeekHighChangePercent': -0.05613228, 'fiftyTwoWeekChangePercent': 8.402884, 'cryptoTradeable': False, 'hasPrePostMarketData': True, 'firstTradeDateMilliseconds': 345479400000, 'marketState': 'CLOSED', 'displayName': 'Apple', 'trailingPegRatio': 2.3591}
2025-09-20 11:59:19,670 - INFO - root - -- Before model call hook executed.
2025-09-20 11:59:19,670 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 4}, 
LLM_Request: model='gemini-2.5-flash' contents=[Content(
  parts=[
    Part(
      text='stock price of aapl'
    ),
  ],
  role='user'
), Content(
  parts=[
    Part(
      function_call=FunctionCall(
        args={
          'ticker': 'aapl'
        },
        name='extract_stock_info'
      ),
      thought_signature=b'\n\xff\x01\x01\xd1\xed\x8ao\xe9\x889;\xa7\xd2\x0f\xd5\x9d\x023\xcaB\xac\xbcxB\x15\xc8\x10\xb0\xb2\xb7\xb5\xbc\x0eY\xe9\x8df\xa7(\xfb\x9a\xad\xe9x\x9cZ\xd9M\xf8O2\xd8\xe6x|\xc7l\xa0\x04\xfa;\xbbok\x7f\xa8|J\x1ec\xfci\xbd\xfe\xc3i\xac\x0b\x83zp\xf1\xdc\xaf\xc5\xa5\xa8\xd8ZF_\xae\x84k\x84\xdd...'
    ),
  ],
  role='model'
), Content(
  parts=[
    Part(
      function_response=FunctionResponse(
        name='extract_stock_info',
        response=<dict len=180>
      )
    ),
  ],
  role='user'
)] config=GenerateContentConfig(
  system_instruction="""you can gather information about stocks using yfinance api, 
you can reflect upon the result and provide comprehensive details using data. Previous agent output: 

You are an agent. Your internal name is "info_gather_agent".

 The description about you is "analyse provided ticker symbol"""",
  tools=[
    Tool(
      function_declarations=[
        FunctionDeclaration(
          description="""
Extract stock information for a given ticker symbol.
ticker - string ticker symbol for the stock
""",
          name='extract_stock_info',
          parameters=Schema(
            properties={
              <... Max depth ...>: <... Max depth ...>
            },
            required=[
              <... Max depth ...>,
            ],
            type=<Type.OBJECT: 'OBJECT'>
          )
        ),
      ]
    ),
  ]
) live_connect_config=LiveConnectConfig() tools_dict={'extract_stock_info': <google.adk.tools.function_tool.FunctionTool object at 0x000001F64A1F2210>}
2025-09-20 11:59:20,222 - INFO - google_adk.google.adk.models.google_llm - Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
2025-09-20 11:59:20,222 - INFO - google_genai.models - AFC is enabled with max remote calls: 10.
2025-09-20 11:59:22,322 - INFO - google_adk.google.adk.models.google_llm - Response received from the model.
2025-09-20 11:59:22,323 - INFO - root - -- After model call hook executed.
2025-09-20 11:59:22,323 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 4}, 
LLM_Response: content=Content(
  parts=[
    Part(
      text="""The current stock price of Apple (AAPL) is $245.50. The previous closing price was $237.88, and it opened at $241.175. The day's high reached $246.30, and the low was $240.21.

Here are some additional details about Apple Inc.:

*   **Market Cap:** $3,643,315,585,024
*   **Average Analyst Rating:** 2.0 - Buy
*   **52-Week Range:** $169.21 - $260.10
*   **Dividend Rate:** $1.04 per year, with a yield of 0.42%
*   **P/E Ratio (Trailing):** 37.31
*   **EPS (Trailing Twelve Months):** $6.58
*   **CEO:** Mr. Timothy D. Cook
*   **Headquarters:** One Apple Park Way, Cupertino, California, United States
*   **Industry:** Consumer Electronics
*   **Full-Time Employees:** 150,000

Apple Inc. designs, manufactures, and markets smartphones, personal computers, tablets, wearables, and accessories worldwide. They also offer various services, including AppleCare, cloud services, and subscription-based services like Apple Arcade, Apple Music, and Apple TV+."""
    ),
  ],
  role='model'
) grounding_metadata=None partial=None turn_complete=None finish_reason=<FinishReason.STOP: 'STOP'> error_code=None error_message=None interrupted=None custom_metadata=None usage_metadata=GenerateContentResponseUsageMetadata(
  candidates_token_count=310,
  prompt_token_count=3503,
  prompt_tokens_details=[
    ModalityTokenCount(
      modality=<MediaModality.TEXT: 'TEXT'>,
      token_count=3503
    ),
  ],
  total_token_count=3813
) live_session_resumption_update=None input_transcription=None output_transcription=None
2025-09-20 11:59:22,324 - INFO - root - -- After agent call hook executed.
2025-09-20 11:59:22,324 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 4, 'result': "The current stock price of Apple (AAPL) is $245.50. The previous closing price was $237.88, and it opened at $241.175. The day's high reached $246.30, and the low was $240.21.\n\nHere are some additional details about Apple Inc.:\n\n*   **Market Cap:** $3,643,315,585,024\n*   **Average Analyst Rating:** 2.0 - Buy\n*   **52-Week Range:** $169.21 - $260.10\n*   **Dividend Rate:** $1.04 per year, with a yield of 0.42%\n*   **P/E Ratio (Trailing):** 37.31\n*   **EPS (Trailing Twelve Months):** $6.58\n*   **CEO:** Mr. Timothy D. Cook\n*   **Headquarters:** One Apple Park Way, Cupertino, California, United States\n*   **Industry:** Consumer Electronics\n*   **Full-Time Employees:** 150,000\n\nApple Inc. designs, manufactures, and markets smartphones, personal computers, tablets, wearables, and accessories worldwide. They also offer various services, including AppleCare, cloud services, and subscription-based services like Apple Arcade, Apple Music, and Apple TV+."}
2025-09-20 11:59:22,324 - INFO - root - ---- After tool call hook executed.
2025-09-20 11:59:22,324 - INFO - root - Tool: info_gather_agent, 
Args: {'request': 'stock price of aapl'}, 
ToolContext: <google.adk.sessions.state.State object at 0x000001F64A2272F0>, 
Output: The current stock price of Apple (AAPL) is $245.50. The previous closing price was $237.88, and it opened at $241.175. The day's high reached $246.30, and the low was $240.21.

Here are some additional details about Apple Inc.:

*   **Market Cap:** $3,643,315,585,024
*   **Average Analyst Rating:** 2.0 - Buy
*   **52-Week Range:** $169.21 - $260.10
*   **Dividend Rate:** $1.04 per year, with a yield of 0.42%
*   **P/E Ratio (Trailing):** 37.31
*   **EPS (Trailing Twelve Months):** $6.58
*   **CEO:** Mr. Timothy D. Cook
*   **Headquarters:** One Apple Park Way, Cupertino, California, United States
*   **Industry:** Consumer Electronics
*   **Full-Time Employees:** 150,000

Apple Inc. designs, manufactures, and markets smartphones, personal computers, tablets, wearables, and accessories worldwide. They also offer various services, including AppleCare, cloud services, and subscription-based services like Apple Arcade, Apple Music, and Apple TV+.
2025-09-20 11:59:22,350 - INFO - root - ------ Before model call hook executed.
2025-09-20 11:59:22,350 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 5, 'result': "The current stock price of Apple (AAPL) is $245.50. The previous closing price was $237.88, and it opened at $241.175. The day's high reached $246.30, and the low was $240.21.\n\nHere are some additional details about Apple Inc.:\n\n*   **Market Cap:** $3,643,315,585,024\n*   **Average Analyst Rating:** 2.0 - Buy\n*   **52-Week Range:** $169.21 - $260.10\n*   **Dividend Rate:** $1.04 per year, with a yield of 0.42%\n*   **P/E Ratio (Trailing):** 37.31\n*   **EPS (Trailing Twelve Months):** $6.58\n*   **CEO:** Mr. Timothy D. Cook\n*   **Headquarters:** One Apple Park Way, Cupertino, California, United States\n*   **Industry:** Consumer Electronics\n*   **Full-Time Employees:** 150,000\n\nApple Inc. designs, manufactures, and markets smartphones, personal computers, tablets, wearables, and accessories worldwide. They also offer various services, including AppleCare, cloud services, and subscription-based services like Apple Arcade, Apple Music, and Apple TV+."}, 
LLM_Request: model='gemini-2.5-flash' contents=[Content(
  parts=[
    Part(
      text='What is the stock price of aapl?'
    ),
  ],
  role='user'
), Content(
  parts=[
    Part(
      function_call=FunctionCall(
        args={
          'request': 'stock price of aapl'
        },
        name='info_gather_agent'
      ),
      thought_signature=b"\n\x87\x02\x01\xd1\xed\x8ao9OqI\xc5\x9fUS\xd5B\xb0\xc3\xbbq\x02\xdc\\\xc7'\xd4\x05 YX\xa7\xd7\xdbK2\x1b\x8e\xc3\xd19\xa1G\xaf\x03\x1fv\x88\xf4\x14(\x90\xee\xd7\xa1`H\x11\xb2F\xf0\x9cI/\xfe\xc2M}mlN\x95\x1f\x12\xc8\x94q\x1e\xfd\xbd#4\x9d\xe1\x0e\x10\x82\xfbm\xdeiza\x98M\xf7...'
    ),
  ],
  role='model'
), Content(
  parts=[
    Part(
      function_response=FunctionResponse(
        name='info_gather_agent',
        response={
          'result': """The current stock price of Apple (AAPL) is $245.50. The previous closing price was $237.88, and it opened at $241.175. The day's high reached $246.30, and the low was $240.21.

Here are some additional details about Apple Inc.:

*   **Market Cap:** $3,643,315,585,024
*   **Average Analyst Rating:** 2.0 - Buy
*   **52-Week Range:** $169.21 - $260.10
*   **Dividend Rate:** $1.04 per year, with a yield of 0.42%
*   **P/E Ratio (Trailing):** 37.31
*   **EPS (Trailing Twelve Months):** $6.58
*   **CEO:** Mr. Timothy D. Cook
*   **Headquarters:** One Apple Park Way, Cupertino, California, United States
*   **Industry:** Consumer Electronics
*   **Full-Time Employees:** 150,000

Apple Inc. designs, manufactures, and markets smartphones, personal computers, tablets, wearables, and accessories worldwide. They also offer various services, including AppleCare, cloud services, and subscription-based services like Apple Arcade, Apple Music, and Apple TV+."""
        }
      )
    ),
  ],
  role='user'
)] config=GenerateContentConfig(
  system_instruction=""" you are a stock analyst who can use other agents to suppliment the analysis by gathering information.
History: 

You are an agent. Your internal name is "root_agent".

 The description about you is "Root agent to coordinate stock analysis"""",
  tools=[
    Tool(
      function_declarations=[
        FunctionDeclaration(
          description='analyse provided ticker symbol',
          name='info_gather_agent',
          parameters=Schema(
            properties={
              <... Max depth ...>: <... Max depth ...>
            },
            required=[
              <... Max depth ...>,
            ],
            type=<Type.OBJECT: 'OBJECT'>
          )
        ),
      ]
    ),
  ]
) live_connect_config=LiveConnectConfig() tools_dict={'info_gather_agent': <google.adk.tools.agent_tool.AgentTool object at 0x000001F67ADF57F0>}
2025-09-20 11:59:22,932 - INFO - google_adk.google.adk.models.google_llm - Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
2025-09-20 11:59:22,932 - INFO - google_genai.models - AFC is enabled with max remote calls: 10.
2025-09-20 11:59:24,604 - INFO - google_adk.google.adk.models.google_llm - Response received from the model.
2025-09-20 11:59:24,604 - INFO - root - ------ After model call hook executed.
2025-09-20 11:59:24,605 - INFO - root - CallbackContext: {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 6, 'result': "The current stock price of Apple (AAPL) is $245.50. The previous closing price was $237.88, and it opened at $241.175. The day's high reached $246.30, and the low was $240.21.\n\nHere are some additional details about Apple Inc.:\n\n*   **Market Cap:** $3,643,315,585,024\n*   **Average Analyst Rating:** 2.0 - Buy\n*   **52-Week Range:** $169.21 - $260.10\n*   **Dividend Rate:** $1.04 per year, with a yield of 0.42%\n*   **P/E Ratio (Trailing):** 37.31\n*   **EPS (Trailing Twelve Months):** $6.58\n*   **CEO:** Mr. Timothy D. Cook\n*   **Headquarters:** One Apple Park Way, Cupertino, California, United States\n*   **Industry:** Consumer Electronics\n*   **Full-Time Employees:** 150,000\n\nApple Inc. designs, manufactures, and markets smartphones, personal computers, tablets, wearables, and accessories worldwide. They also offer various services, including AppleCare, cloud services, and subscription-based services like Apple Arcade, Apple Music, and Apple TV+."}, 
LLM_Response: content=Content(
  parts=[
    Part(
      text="""The current stock price of Apple (AAPL) is $245.50. The previous closing price was $237.88, and it opened at $241.175. The day's high reached $246.30, and the low was $240.21.

Here are some additional details about Apple Inc.:

*   **Market Cap:** $3,643,315,585,024
*   **Average Analyst Rating:** 2.0 - Buy
*   **52-Week Range:** $169.21 - $260.10
*   **Dividend Rate:** $1.04 per year, with a yield of 0.42%
*   **P/E Ratio (Trailing):** 37.31
*   **EPS (Trailing Twelve Months):** $6.58
*   **CEO:** Mr. Timothy D. Cook
*   **Headquarters:** One Apple Park Way, Cupertino, California, United States
*   **Industry:** Consumer Electronics
*   **Full-Time Employees:** 150,000

Apple Inc. designs, manufactures, and markets smartphones, personal computers, tablets, wearables, and accessories worldwide. They also offer various services, including AppleCare, cloud services, and subscription-based services like Apple Arcade, Apple Music, and Apple TV+."""
    ),
  ],
  role='model'
) grounding_metadata=None partial=None turn_complete=None finish_reason=<FinishReason.STOP: 'STOP'> error_code=None error_message=None interrupted=None custom_metadata=None usage_metadata=GenerateContentResponseUsageMetadata(
  candidates_token_count=310,
  prompt_token_count=465,
  prompt_tokens_details=[
    ModalityTokenCount(
      modality=<MediaModality.TEXT: 'TEXT'>,
      token_count=465
    ),
  ],
  total_token_count=775
) live_session_resumption_update=None input_transcription=None output_transcription=None
2025-09-20 11:59:24,611 - INFO - root - -- After agent call hook executed.
2025-09-20 11:59:24,611 - INFO - root - CallbackContext: ('e-ad6b0e9b-ceaa-49ff-97af-68c476d7beac', {'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 7, 'result': "The current stock price of Apple (AAPL) is $245.50. The previous closing price was $237.88, and it opened at $241.175. The day's high reached $246.30, and the low was $240.21.\n\nHere are some additional details about Apple Inc.:\n\n*   **Market Cap:** $3,643,315,585,024\n*   **Average Analyst Rating:** 2.0 - Buy\n*   **52-Week Range:** $169.21 - $260.10\n*   **Dividend Rate:** $1.04 per year, with a yield of 0.42%\n*   **P/E Ratio (Trailing):** 37.31\n*   **EPS (Trailing Twelve Months):** $6.58\n*   **CEO:** Mr. Timothy D. Cook\n*   **Headquarters:** One Apple Park Way, Cupertino, California, United States\n*   **Industry:** Consumer Electronics\n*   **Full-Time Employees:** 150,000\n\nApple Inc. designs, manufactures, and markets smartphones, personal computers, tablets, wearables, and accessories worldwide. They also offer various services, including AppleCare, cloud services, and subscription-based services like Apple Arcade, Apple Music, and Apple TV+."}, Content(
  parts=[
    Part(
      text='What is the stock price of aapl?'
    ),
  ],
  role='user'
))
2025-09-20 11:59:24,618 - INFO - werkzeug - 127.0.0.1 - - [20/Sep/2025 11:59:24] "POST /agent_endpoint HTTP/1.1" 200 -
2025-09-20 12:00:15,860 - INFO - __main__ - Received request with query: What is the delta between opening and closing price?, session_id: session_123, user_id: user_456
2025-09-20 12:00:15,861 - INFO - root - -- Before agent call hook executed.
2025-09-20 12:00:15,862 - INFO - root - CallbackContext: ('e-84779980-76ba-48c7-b183-74dea790e48d', {'history': "\nUser: What is the stock price of aapl?\nAgent: The current stock price of Apple (AAPL) is $245.50. The previous closing price was $237.88, and it opened at $241.175. The day's high reached $246.30, and the low was $240.21.\n\nHere are some additional details about Apple Inc.:\n\n*   **Market Cap:** $3,643,315,585,024\n*   **Average Analyst Rating:** 2.0 - Buy\n*   **52-Week Range:** $169.21 - $260.10\n*   **Dividend Rate:** $1.04 per year, with a yield of 0.42%\n*   **P/E Ratio (Trailing):** 37.31\n*   **EPS (Trailing Twelve Months):** $6.58\n*   **CEO:** Mr. Timothy D. Cook\n*   **Headquarters:** One Apple Park Way, Cupertino, California, United States\n*   **Industry:** Consumer Electronics\n*   **Full-Time Employees:** 150,000\n\nApple Inc. designs, manufactures, and markets smartphones, personal computers, tablets, wearables, and accessories worldwide. They also offer various services, including AppleCare, cloud services, and subscription-based services like Apple Arcade, Apple Music, and Apple TV+.", 'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 8}, Content(
  parts=[
    Part(
      text='What is the delta between opening and closing price?'
    ),
  ],
  role='user'
))
2025-09-20 12:00:15,867 - INFO - root - ------ Before model call hook executed.
2025-09-20 12:00:15,867 - INFO - root - CallbackContext: {'history': "\nUser: What is the stock price of aapl?\nAgent: The current stock price of Apple (AAPL) is $245.50. The previous closing price was $237.88, and it opened at $241.175. The day's high reached $246.30, and the low was $240.21.\n\nHere are some additional details about Apple Inc.:\n\n*   **Market Cap:** $3,643,315,585,024\n*   **Average Analyst Rating:** 2.0 - Buy\n*   **52-Week Range:** $169.21 - $260.10\n*   **Dividend Rate:** $1.04 per year, with a yield of 0.42%\n*   **P/E Ratio (Trailing):** 37.31\n*   **EPS (Trailing Twelve Months):** $6.58\n*   **CEO:** Mr. Timothy D. Cook\n*   **Headquarters:** One Apple Park Way, Cupertino, California, United States\n*   **Industry:** Consumer Electronics\n*   **Full-Time Employees:** 150,000\n\nApple Inc. designs, manufactures, and markets smartphones, personal computers, tablets, wearables, and accessories worldwide. They also offer various services, including AppleCare, cloud services, and subscription-based services like Apple Arcade, Apple Music, and Apple TV+.", 'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 9}, 
LLM_Request: model='gemini-2.5-flash' contents=[Content(
  parts=[
    Part(
      text='What is the delta between opening and closing price?'
    ),
  ],
  role='user'
)] config=GenerateContentConfig(
  system_instruction=""" you are a stock analyst who can use other agents to suppliment the analysis by gathering information.
History: 
User: What is the stock price of aapl?
Agent: The current stock price of Apple (AAPL) is $245.50. The previous closing price was $237.88, and it opened at $241.175. The day's high reached $246.30, and the low was $240.21.

Here are some additional details about Apple Inc.:

*   **Market Cap:** $3,643,315,585,024
*   **Average Analyst Rating:** 2.0 - Buy
*   **52-Week Range:** $169.21 - $260.10
*   **Dividend Rate:** $1.04 per year, with a yield of 0.42%
*   **P/E Ratio (Trailing):** 37.31
*   **EPS (Trailing Twelve Months):** $6.58
*   **CEO:** Mr. Timothy D. Cook
*   **Headquarters:** One Apple Park Way, Cupertino, California, United States
*   **Industry:** Consumer Electronics
*   **Full-Time Employees:** 150,000

Apple Inc. designs, manufactures, and markets smartphones, personal computers, tablets, wearables, and accessories worldwide. They also offer various services, including AppleCare, cloud services, and subscription-based services like Apple Arcade, Apple Music, and Apple TV+.

You are an agent. Your internal name is "root_agent".

 The description about you is "Root agent to coordinate stock analysis"""",
  tools=[
    Tool(
      function_declarations=[
        FunctionDeclaration(
          description='analyse provided ticker symbol',
          name='info_gather_agent',
          parameters=Schema(
            properties={
              <... Max depth ...>: <... Max depth ...>
            },
            required=[
              <... Max depth ...>,
            ],
            type=<Type.OBJECT: 'OBJECT'>
          )
        ),
      ]
    ),
  ]
) live_connect_config=LiveConnectConfig() tools_dict={'info_gather_agent': <google.adk.tools.agent_tool.AgentTool object at 0x000001F67ADF57F0>}
2025-09-20 12:00:16,433 - INFO - google_adk.google.adk.models.google_llm - Sending out request, model: gemini-2.5-flash, backend: GoogleLLMVariant.GEMINI_API, stream: False
2025-09-20 12:00:16,433 - INFO - google_genai.models - AFC is enabled with max remote calls: 10.
2025-09-20 12:00:17,474 - INFO - google_adk.google.adk.models.google_llm - Response received from the model.
2025-09-20 12:00:17,474 - WARNING - google_genai.types - Warning: there are non-text parts in the response: ['thought_signature'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
2025-09-20 12:00:17,474 - INFO - root - ------ After model call hook executed.
2025-09-20 12:00:17,474 - INFO - root - CallbackContext: {'history': "\nUser: What is the stock price of aapl?\nAgent: The current stock price of Apple (AAPL) is $245.50. The previous closing price was $237.88, and it opened at $241.175. The day's high reached $246.30, and the low was $240.21.\n\nHere are some additional details about Apple Inc.:\n\n*   **Market Cap:** $3,643,315,585,024\n*   **Average Analyst Rating:** 2.0 - Buy\n*   **52-Week Range:** $169.21 - $260.10\n*   **Dividend Rate:** $1.04 per year, with a yield of 0.42%\n*   **P/E Ratio (Trailing):** 37.31\n*   **EPS (Trailing Twelve Months):** $6.58\n*   **CEO:** Mr. Timothy D. Cook\n*   **Headquarters:** One Apple Park Way, Cupertino, California, United States\n*   **Industry:** Consumer Electronics\n*   **Full-Time Employees:** 150,000\n\nApple Inc. designs, manufactures, and markets smartphones, personal computers, tablets, wearables, and accessories worldwide. They also offer various services, including AppleCare, cloud services, and subscription-based services like Apple Arcade, Apple Music, and Apple TV+.", 'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 10}, 
LLM_Response: content=Content(
  parts=[
    Part(
      text='The delta between the opening price ($241.175) and the previous closing price ($237.88) is $3.295.',
      thought_signature=b"\n\xf5\x01\x01\xd1\xed\x8ao\x90A,\x84'\xd1\x11\xa5\xcb\xdf\xffj\xa0Mi\xf4\xd3[H\x0e\x17\x03(\x1a\xadR=q\xb5\xdby\xed\n0\x9dp\x1c\xa4\xb1\xbcmoM\x9b\xe6\x82[\xa1\xd6$s0\xe7'\xe9\xaeI\x0fk\xfb\xe0\x86\x8d\xc3}4\xa8t\x01\xce$\x0b\xfc\x9a\x83+\xc0\xe4\xa9<:-*sw\x84(\x01D...'
    ),
  ],
  role='model'
) grounding_metadata=None partial=None turn_complete=None finish_reason=<FinishReason.STOP: 'STOP'> error_code=None error_message=None interrupted=None custom_metadata=None usage_metadata=GenerateContentResponseUsageMetadata(
  candidates_token_count=36,
  prompt_token_count=427,
  prompt_tokens_details=[
    ModalityTokenCount(
      modality=<MediaModality.TEXT: 'TEXT'>,
      token_count=427
    ),
  ],
  thoughts_token_count=57,
  total_token_count=520
) live_session_resumption_update=None input_transcription=None output_transcription=None
2025-09-20 12:00:17,479 - INFO - root - -- After agent call hook executed.
2025-09-20 12:00:17,480 - INFO - root - CallbackContext: ('e-84779980-76ba-48c7-b183-74dea790e48d', {'history': "\nUser: What is the stock price of aapl?\nAgent: The current stock price of Apple (AAPL) is $245.50. The previous closing price was $237.88, and it opened at $241.175. The day's high reached $246.30, and the low was $240.21.\n\nHere are some additional details about Apple Inc.:\n\n*   **Market Cap:** $3,643,315,585,024\n*   **Average Analyst Rating:** 2.0 - Buy\n*   **52-Week Range:** $169.21 - $260.10\n*   **Dividend Rate:** $1.04 per year, with a yield of 0.42%\n*   **P/E Ratio (Trailing):** 37.31\n*   **EPS (Trailing Twelve Months):** $6.58\n*   **CEO:** Mr. Timothy D. Cook\n*   **Headquarters:** One Apple Park Way, Cupertino, California, United States\n*   **Industry:** Consumer Electronics\n*   **Full-Time Employees:** 150,000\n\nApple Inc. designs, manufactures, and markets smartphones, personal computers, tablets, wearables, and accessories worldwide. They also offer various services, including AppleCare, cloud services, and subscription-based services like Apple Arcade, Apple Music, and Apple TV+.", 'session_id': 'session_123', 'user_id': 'user_456', 'app_name': 'stock_analysis_app', 'seq': 11, 'result': 'The delta between the opening price ($241.175) and the previous closing price ($237.88) is $3.295.'}, Content(
  parts=[
    Part(
      text='What is the delta between opening and closing price?'
    ),
  ],
  role='user'
))
2025-09-20 12:00:17,484 - INFO - werkzeug - 127.0.0.1 - - [20/Sep/2025 12:00:17] "POST /agent_endpoint HTTP/1.1" 200 -
2025-09-20 19:06:59,936 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\adk\\agents\\__init__.py', reloading
2025-09-20 19:06:59,937 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\adk\\agents\\llm_agent.py', reloading
2025-09-20 19:06:59,947 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\adk\\agents\\base_agent.py', reloading
2025-09-20 19:06:59,966 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\pydantic\\__init__.py', reloading
2025-09-20 19:06:59,978 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\pydantic\\errors.py', reloading
2025-09-20 19:07:00,002 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\pydantic\\main.py', reloading
2025-09-20 19:07:00,035 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\pydantic\\networks.py', reloading
2025-09-20 19:07:00,043 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\adk\\runners.py', reloading
2025-09-20 19:07:00,054 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\adk\\events\\__init__.py', reloading
2025-09-20 19:07:00,062 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\pydantic\\types.py', reloading
2025-09-20 19:07:00,063 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\adk\\sessions\\__init__.py', reloading
2025-09-20 19:07:00,076 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\genai\\types.py', reloading
2025-09-20 19:07:00,084 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\flask\\__init__.py', reloading
2025-09-20 19:07:00,085 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\pydantic\\deprecated\\tools.py', reloading
2025-09-20 19:07:00,097 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\adk\\models\\__init__.py', reloading
2025-09-20 19:07:00,111 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\adk\\tools\\__init__.py', reloading
2025-09-20 19:07:00,123 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\adk\\agents\\callback_context.py', reloading
2025-09-20 19:07:00,134 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\genai\\__init__.py', reloading
2025-09-20 19:07:00,152 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\adk\\auth\\auth_tool.py', reloading
2025-09-20 19:07:00,153 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\adk\\agents\\run_config.py', reloading
2025-09-20 19:07:00,163 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\adk\\code_executors\\base_code_executor.py', reloading
2025-09-20 19:07:00,165 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\adk\\tools\\agent_tool.py', reloading
2025-09-20 19:07:00,173 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\adk\\tools\\base_tool.py', reloading
2025-09-20 19:07:00,176 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\adk\\events\\event.py', reloading
2025-09-20 19:07:00,183 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\adk\\tools\\tool_context.py', reloading
2025-09-20 19:07:00,188 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\adk\\models\\base_llm.py', reloading
2025-09-20 19:07:00,200 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\adk\\models\\llm_request.py', reloading
2025-09-20 19:07:00,210 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\adk\\models\\llm_response.py', reloading
2025-09-20 19:07:00,214 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\adk\\auth\\auth_credential.py', reloading
2025-09-20 19:07:00,222 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\adk\\events\\event_actions.py', reloading
2025-09-20 19:07:00,222 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\adk\\planners\\base_planner.py', reloading
2025-09-20 19:07:00,231 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\adk\\tools\\base_toolset.py', reloading
2025-09-20 19:07:00,231 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\adk\\memory\\base_memory_service.py', reloading
2025-09-20 19:07:00,240 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\adk\\utils\\feature_decorator.py', reloading
2025-09-20 19:07:00,240 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\adk\\agents\\readonly_context.py', reloading
2025-09-20 19:07:00,249 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\adk\\sessions\\state.py', reloading
2025-09-20 19:07:00,250 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\opentelemetry\\trace\\__init__.py', reloading
2025-09-20 19:07:00,263 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\google\\genai\\_common.py', reloading
2025-09-20 19:07:00,268 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\pydantic\\_migration.py', reloading
2025-09-20 19:07:00,280 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\pydantic_core\\__init__.py', reloading
2025-09-20 19:07:00,302 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\pydantic_core\\core_schema.py', reloading
2025-09-20 19:07:00,310 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\pydantic\\aliases.py', reloading
2025-09-20 19:07:00,322 - INFO - werkzeug -  * Detected change in 'C:\\Users\\azaha\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\site-packages\\pydantic\\config.py', reloading
2025-09-20 19:07:01,828 - INFO - werkzeug -  * Restarting with watchdog (windowsapi)
